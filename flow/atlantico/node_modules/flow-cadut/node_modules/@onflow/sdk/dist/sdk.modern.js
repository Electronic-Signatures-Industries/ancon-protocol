import{invariant as e}from"@onflow/util-invariant";import{spawn as t,SUBSCRIBE as n,UNSUBSCRIBE as a,send as r,subscriber as o}from"@onflow/util-actor";import{Transaction as s,SendTransactionRequest as c,AccessAPI as i,GetTransactionRequest as u,ExecuteScriptAtBlockIDRequest as l,ExecuteScriptAtBlockHeightRequest as d,ExecuteScriptAtLatestBlockRequest as g,GetAccountAtBlockHeightRequest as f,GetAccountAtLatestBlockRequest as p,GetEventsForHeightRangeRequest as m,GetEventsForBlockIDsRequest as y,GetBlockByIDRequest as h,GetBlockByHeightRequest as k,GetLatestBlockRequest as w,GetBlockHeaderByIDRequest as I,GetBlockHeaderByHeightRequest as b,GetLatestBlockHeaderRequest as S,GetCollectionByIDRequest as v,PingRequest as B}from"@onflow/protobuf";import{sansPrefix as A,withPrefix as E}from"@onflow/util-address";import{grpc as T}from"@improbable-eng/grpc-web";import{NodeHttpTransport as N}from"@improbable-eng/grpc-web-node-http-transport";import{encode as x}from"@onflow/rlp";import{template as L}from"@onflow/util-template";export{template as cadence,template as cdc}from"@onflow/util-template";function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const O='{\n  "tag":"UNKNOWN",\n  "assigns":{},\n  "status":"OK",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computeLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":null,\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  },\n  "collection": {\n    "id":null\n  }\n}',G=new Set(Object.keys(JSON.parse(O))),C=()=>JSON.parse(O),U="abcdefghijklmnopqrstuvwxyz0123456789".split(""),R=()=>U[~~(Math.random()*U.length)],D=()=>Array.from({length:10},R).join(""),K=e=>null==e,F=e=>(e.status="OK",e),P=(e,t)=>(e.status="BAD",e.reason=t,e),H=e=>t=>(t.tag=e,F(t)),z=(t,n={})=>a=>{e("function"==typeof t||"object"==typeof t,"prepAccount must be passed an authorization function or an account object"),e(null!=n.role,"Account must have a role");const r=JSON.parse('{\n  "kind":"ACCOUNT",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),o=n.role,s=D();return a.accounts[s]=_({},r,{tempId:s},t="function"==typeof t?{resolve:t}:t,{role:_({},r.role,"object"==typeof t.role?t.role:{},{[o]:!0})}),"authorizer"===o?a.authorizations.push(s):a[o]=s,a},j=e=>t=>{let n=D();return t.message.arguments.push(n),t.arguments[n]=JSON.parse('{\n  "kind":"ARGUMENT",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null\n}'),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,F(t)},$=H("SCRIPT"),q=H("TRANSACTION"),J=H("GET_TRANSACTION_STATUS"),M=H("GET_TRANSACTION"),W=H("GET_ACCOUNT"),Y=H("GET_EVENTS"),V=H("GET_LATEST_BLOCK"),X=H("GET_BLOCK_BY_ID"),Z=H("GET_BLOCK_BY_HEIGHT"),Q=H("PING"),ee=H("GET_BLOCK"),te=H("GET_BLOCK_HEADER"),ne=H("GET_COLLECTION"),ae=e=>t=>t.tag===e,re=ae("UNKNOWN"),oe=ae("SCRIPT"),se=ae("TRANSACTION"),ce=ae("GET_TRANSACTION_STATUS"),ie=ae("GET_TRANSACTION"),ue=ae("GET_ACCOUNT"),le=ae("GET_EVENTS"),de=ae("GET_LATEST_BLOCK"),ge=ae("GET_BLOCK_BY_ID"),fe=ae("GET_BLOCK_BY_HEIGHT"),pe=ae("PING"),me=ae("GET_BLOCK"),ye=ae("GET_BLOCK_HEADER"),he=ae("GET_COLLECTION"),ke=e=>"OK"===e.status,we=e=>"BAD"===e.status,Ie=e=>e.reason,be=async(e,t=[])=>{try{if(e=(e=>{for(let t of Object.keys(e))if(!G.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e})(await e),we(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[n,...a]=t,r=await n;if("function"==typeof r)return be(r(e),a);if(K(r)||!r)return be(e,a);if((e=>{if(null===(t=e)||"object"!=typeof t||K(e)||(e=>"number"==typeof e)(e))return!1;var t;for(let t of G)if(!e.hasOwnProperty(t))return!1;return!0})(r))return be(r,a);throw new Error("Invalid Interaction Composition")}catch(e){throw e}},Se=(...e)=>{const[t,n]=e;return Array.isArray(t)&&null==n?e=>Se(e,t):be(t,n)},ve=e=>e,Be=(e,t,n)=>null==e.assigns[t]?n:e.assigns[t],Ae=(e,t)=>n=>(n.assigns[e]=t,F(n)),Ee=(e,t=ve)=>n=>(n.assigns[e]=t(n.assigns[e],n),F(n)),Te=e=>t=>(delete t.assigns[e],F(t));function Ne(e=[]){return Se(C(),e)}const xe="config",Le="PUT_CONFIG",_e="GET_CONFIG",Oe="CONFIG/UPDATED",Ge=e=>e,Ce={[Le]:(e,t,{key:n,value:a})=>{if(null==n)throw new Error("Missing 'key' for config/put.");e.put(n,a),e.broadcast(Oe,_({},e.all()))},[_e]:(e,t,{key:n,fallback:a})=>{if(null==n)throw new Error("Missing 'key' for config/get");t.reply(e.get(n,a))},GET_ALL_CONFIG:(e,t)=>{t.reply(_({},e.all()))},UPDATE_CONFIG:(e,t,{key:n,fn:a})=>{if(null==n)throw new Error("Missing 'key' for config/update");e.update(n,a||Ge),e.broadcast(Oe,_({},e.all()))},DELETE_CONFIG:(e,t,{key:n})=>{if(null==n)throw new Error("Missing 'key' for config/delete");e.delete(n),e.broadcast(Oe,_({},e.all()))},CLEAR_CONFIG:(e,t)=>{let n=Object.keys(e.all());for(let t of n)e.delete(t);e.broadcast(Oe,_({},e.all()))},WHERE_CONFIG:(e,t,{pattern:n})=>{if(null==n)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(n))},[n]:(e,t)=>{e.subscribe(t.from),e.send(t.from,Oe,_({},e.all()))},[a]:(e,t)=>{e.unsubscribe(t.from)}};function Ue(e,t){return r(xe,Le,{key:e,value:t}),$e()}function Re(e,t){return r(xe,_e,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function De(e=[],t){if(!e.length)return t;const[n,...a]=e,r=await Re(n);return null==r?De(a,t):r}function Ke(){return r(xe,"GET_ALL_CONFIG",null,{expectReply:!0,timeout:10})}function Fe(e,t=Ge){return r(xe,"UPDATE_CONFIG",{key:e,fn:t}),$e()}function Pe(e){return r(xe,"DELETE_CONFIG",{key:e}),$e()}function He(e){return r(xe,"WHERE_CONFIG",{pattern:e},{expectReply:!0,timeout:10})}function ze(e){return o(xe,()=>t(Ce,xe),e)}function je(){return r(xe,"CLEAR_CONFIG")}function $e(e){return null!=e&&"object"==typeof e&&Object.keys(e).map(t=>Ue(t,e[t])),{put:Ue,get:Re,all:Ke,first:De,update:Fe,delete:Pe,where:He,subscribe:ze,overload:Je}}t(Ce,xe),$e.put=Ue,$e.get=Re,$e.all=Ke,$e.first=De,$e.update=Fe,$e.delete=Pe,$e.where=He,$e.subscribe=ze,$e.overload=Je;const qe=e=>e;function Je(e={},t=qe){return new Promise(async(n,a)=>{const r=await Ke();try{$e(e);var o=await t(await Ke());await je(),await $e(r),n(o)}catch(e){await je(),await $e(r),a(e)}})}const Me=()=>JSON.parse('{\n    "tag":null,\n    "transaction":null,\n    "transactionStatus":null,\n    "transactionId":null,\n    "encodedData":null,\n    "events":null,\n    "account":null,\n    "block":null,\n    "blockHeader":null,\n    "latestBlock":null,\n    "collection":null\n}');async function We(e,t,n){const a=await $e().get("grpc.metadata",{});return new Promise((r,o)=>{T.unary(t,{request:n,host:e,metadata:new T.Metadata(a),onEnd:({status:e,statusMessage:t,message:n})=>{e===T.Code.OK?r(n):o(new Error(t))}})})}T.setDefaultTransport(N());const Ye=e=>Buffer.from(e,"hex"),Ve=e=>Buffer.from(e.padStart(16,0),"hex"),Xe=e=>Buffer.from(e).toString("hex"),Ze=e=>Buffer.from(JSON.stringify(e),"utf8");function Qe(e,t){let n=Me();return n.tag=e.tag,n.encodedData=JSON.parse(Buffer.from(t.getValue_asU8()).toString("utf8")),n}const et=e=>Buffer.from(e).toString("hex"),tt=e=>Buffer.from(e.padStart(16,0),"hex");function nt(e,t){let n=Me();n.tag=e.tag;const a=t.getAccount();let r;const o=(r=a.getContractsMap())?r.getEntryList().reduce((e,t)=>_({},e,{[t[0]]:Buffer.from(t[1]||new UInt8Array).toString("utf8")}),{}):{};return n.account={address:E(et(a.getAddress_asU8())),balance:a.getBalance(),code:Buffer.from(a.getCode_asU8()||new UInt8Array).toString("utf8"),contracts:o,keys:a.getKeysList().map(e=>({index:e.getIndex(),publicKey:et(e.getPublicKey_asU8()),signAlgo:e.getSignAlgo(),hashAlgo:e.getHashAlgo(),weight:e.getWeight(),sequenceNumber:e.getSequenceNumber(),revoked:e.getRevoked()}))},n}const at=e=>Buffer.from(e).toString("hex");function rt(e,t){let n=Me();n.tag=e.tag;const a=t.getResultsList();return n.events=a.reduce((e,t)=>{const n=at(t.getBlockId_asU8()),a=t.getBlockHeight(),r=t.getBlockTimestamp().toDate().toISOString();return t.getEventsList().forEach(t=>{e.push({blockId:n,blockHeight:a,blockTimestamp:r,type:t.getType(),transactionId:at(t.getTransactionId_asU8()),transactionIndex:t.getTransactionIndex(),eventIndex:t.getEventIndex(),payload:JSON.parse(Buffer.from(t.getPayload_asU8()).toString("utf8"))})}),e},[]),n}const ot=e=>Buffer.from(e).toString("hex");function st(e,t){const n=t.getBlock(),a=n.getCollectionGuaranteesList(),r=n.getBlockSealsList(),o=n.getSignaturesList().map(ot),s=Me();return s.tag=e.tag,s.block={id:ot(n.getId_asU8()),parentId:ot(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp().toDate().toISOString(),collectionGuarantees:a.map(e=>({collectionId:ot(e.getCollectionId_asU8()),signatures:e.getSignaturesList().map(ot)})),blockSeals:r.map(e=>({blockId:ot(e.getBlockId_asU8()),executionReceiptId:ot(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList().map(ot),resultApprovalSignatures:e.getResultApprovalSignaturesList().map(ot)})),signatures:o},s}const ct=e=>Buffer.from(e).toString("hex");function it(e,t){const n=t.getBlock(),a=Me();return a.tag=e.tag,a.blockHeader={id:ct(n.getId_asU8()),parentId:ct(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp().toDate().toISOString()},a}const ut=e=>Buffer.from(e).toString("hex"),lt=e=>Buffer.from(e).toString("hex"),dt=e=>Buffer.from(e).toString("hex"),gt=e=>Buffer.from(e).toString("hex"),ft=async(t,n={})=>{switch(n.node=n.node||await $e().get("accessNode.api"),t=await t,!0){case se(t):return n.sendTransaction?n.sendTransaction(t,n):async function(e,t={}){const n=t.unary||We;e=await e;const a=new s;a.setScript((e=>Buffer.from(e,"utf8"))(e.message.cadence)),a.setGasLimit(e.message.computeLimit),a.setReferenceBlockId(e.message.refBlock?Ye(e.message.refBlock):null),a.setPayer(Ve(A(e.accounts[e.payer].addr))),e.message.arguments.forEach(t=>a.addArguments((e=>Buffer.from(JSON.stringify(e),"utf8"))(e.arguments[t].asArgument))),e.authorizations.map(t=>e.accounts[t].addr).reduce((e,t)=>e.find(e=>e===t)?e:[...e,t],[]).forEach(e=>a.addAuthorizers(Ve(A(e))));const r=new s.ProposalKey;r.setAddress(Ve(A(e.accounts[e.proposer].addr))),r.setKeyId(e.accounts[e.proposer].keyId),r.setSequenceNumber(e.accounts[e.proposer].sequenceNum),a.setProposalKey(r);for(let t of Object.values(e.accounts))try{if(!t.role.payer&&null!=t.signature){const e=new s.Signature;e.setAddress(Ve(A(t.addr))),e.setKeyId(t.keyId),e.setSignature(Ye(t.signature)),a.addPayloadSignatures(e)}}catch(n){throw console.error("Trouble applying payload signature",{acct:t,ix:e}),n}for(let t of Object.values(e.accounts))try{if(t.role.payer&&null!=t.signature){const e=new s.Signature;e.setAddress(Ve(A(t.addr))),e.setKeyId(t.keyId),e.setSignature(Ye(t.signature)),a.addEnvelopeSignatures(e)}}catch(n){throw console.error("Trouble applying envelope signature",{acct:t,ix:e}),n}const o=new c;o.setTransaction(a);var u=Date.now();const l=await n(t.node,i.SendTransaction,o);var d=Date.now();let g=Me();var f;return g.tag=e.tag,g.transactionId=(f=l.getId_asU8(),Buffer.from(f).toString("hex")),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:g.transactionId,delta:d-u}})),g}(t,n);case ce(t):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(t,n):async function(e,t={}){const n=t.unary||We;e=await e;const a=new u;a.setId(Buffer.from(e.transaction.id,"hex"));const r=await n(t.node,i.GetTransactionResult,a);let o=r.getEventsList(),s=Me();return s.tag=e.tag,s.transactionStatus={status:r.getStatus(),statusCode:r.getStatusCode(),errorMessage:r.getErrorMessage(),events:o.map(e=>{return{type:e.getType(),transactionId:(t=e.getTransactionId_asU8(),Buffer.from(t).toString("hex")),transactionIndex:e.getTransactionIndex(),eventIndex:e.getEventIndex(),payload:JSON.parse(Buffer.from(e.getPayload_asU8()).toString("utf8"))};var t})},s}(t,n);case ie(t):return n.sendGetTransaction?n.sendGetTransaction(t,n):async function(e,t={}){const n=t.unary||We;e=await e;const a=new u;a.setId(Buffer.from(e.transaction.id,"hex"));const r=await n(t.node,i.GetTransaction,a);let o=Me();o.tag=e.tag;const s=e=>({address:Xe(e.getAddress_asU8()),keyId:e.getKeyId(),signature:Xe(e.getSignature_asU8())});let c=r.getTransaction();var l;return o.transaction={script:Buffer.from(c.getScript_asU8()).toString("utf8"),args:c.getArgumentsList().map(e=>JSON.parse(Buffer.from(e).toString("utf8"))),referenceBlockId:Xe(c.getReferenceBlockId_asU8()),gasLimit:c.getGasLimit(),proposalKey:(l=c.getProposalKey(),{address:Xe(l.getAddress_asU8()),keyId:l.getKeyId(),sequenceNumber:l.getSequenceNumber()}),payer:Xe(c.getPayer_asU8()),authorizers:c.getAuthorizersList().map(Xe),payloadSignatures:c.getPayloadSignaturesList().map(s),envelopeSignatures:c.getEnvelopeSignaturesList().map(s)},o}(t,n);case oe(t):return n.sendExecuteScript?n.sendExecuteScript(t,n):async function(e,t={}){return(e=await e).block.id?await async function(e,t){const n=t.unary||We,a=new l;a.setBlockId(Buffer.from(e.block.id,"hex"));const r=Buffer.from(e.message.cadence,"utf8");e.message.arguments.forEach(t=>a.addArguments(Ze(e.arguments[t].asArgument))),a.setScript(r);const o=await n(t.node,i.ExecuteScriptAtBlockID,a);return Qe(e,o)}(e,t):e.block.height?await async function(e,t){const n=t.unary||We,a=new d;a.setBlockHeight(Number(e.block.height));const r=Buffer.from(e.message.cadence,"utf8");e.message.arguments.forEach(t=>a.addArguments(Ze(e.arguments[t].asArgument))),a.setScript(r);const o=await n(t.node,i.ExecuteScriptAtBlockHeight,a);return Qe(e,o)}(e,t):await async function(e,t){const n=t.unary||We,a=new g,r=Buffer.from(e.message.cadence,"utf8");e.message.arguments.forEach(t=>a.addArguments(Ze(e.arguments[t].asArgument))),a.setScript(r);const o=await n(t.node,i.ExecuteScriptAtLatestBlock,a);return Qe(e,o)}(e,t)}(t,n);case ue(t):return n.sendGetAccount?n.sendGetAccount(t,n):async function(e,t={}){return null!==(e=await e).block.height?await async function(e,t){const n=t.unary||We,a=new f;return a.setBlockHeight(Number(e.block.height)),a.setAddress(tt(A(e.account.addr))),nt(e,await n(t.node,i.GetAccountAtBlockHeight,a))}(e,t):await async function(e,t){const n=t.unary||We,a=new p;return a.setAddress(tt(A(e.account.addr))),nt(e,await n(t.node,i.GetAccountAtLatestBlock,a))}(e,t)}(t,n);case le(t):return n.sendGetEvents?n.sendGetEvents(t,n):async function(t,n={}){const a=null!==(t=await t).events.start,r=Array.isArray(t.events.blockIds)&&t.events.blockIds.length>0;return e(a||r,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),a?await async function(e,t){const n=t.unary||We,a=new m;return a.setType(e.events.eventType),a.setStartHeight(Number(e.events.start)),a.setEndHeight(Number(e.events.end)),rt(e,await n(t.node,i.GetEventsForHeightRange,a))}(t,n):await async function(e,t){const n=t.unary||We,a=new y;return a.setType(e.events.eventType),e.events.blockIds.forEach(e=>a.addBlockIds(Buffer.from(e,"hex"))),rt(e,await n(t.node,i.GetEventsForBlockIDs,a))}(t,n)}(t,n);case de(t):return n.sendGetLatestBlock?n.sendGetLatestBlock(t,n):async function(e,t={}){e=await e;const n=new w;e.latestBlock&&e.latestBlock.isSealed&&(n.setIsSealed(e.latestBlock.isSealed),console.error("\n          %c@onflow/send Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the interaction object is deprecated and will no longer be recognized in future releases of @onflow/send.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/send/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;")),e.block&&e.block.isSealed&&n.setIsSealed(e.block.isSealed);const a=(await We(t.node,i.GetLatestBlock,n)).getBlock(),r=a.getCollectionGuaranteesList(),o=a.getBlockSealsList(),s=a.getSignaturesList(),c=Me();return c.tag=e.tag,c.block={id:ut(a.getId_asU8()),parentId:ut(a.getParentId_asU8()),height:a.getHeight(),timestamp:a.getTimestamp(),collectionGuarantees:r.map(e=>({collectionId:ut(e.getCollectionId_asU8()),signatures:e.getSignaturesList()})),blockSeals:o.map(e=>({blockId:ut(e.getBlockId_asU8()),executionReceiptId:ut(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()})),signatures:s},c}(t,n);case me(t):return n.sendGetBlock?n.sendGetBlock(t,n):async function(e,t={}){const n=null!==(e=await e).block.height;return null!==e.block.id?await async function(e,t){const n=t.unary||We,a=new h;return a.setId(Buffer.from(e.block.id,"hex")),st(e,await n(t.node,i.GetBlockByID,a))}(e,t):n?await async function(e,t){const n=t.unary||We,a=new k;return a.setHeight(Number(e.block.height)),st(e,await n(t.node,i.GetBlockByHeight,a))}(e,t):await async function(e,t){var n;const a=t.unary||We,r=new w;return null!=(n=e.block)&&n.isSealed&&r.setIsSealed(e.block.isSealed),st(e,await a(t.node,i.GetLatestBlock,r))}(e,t)}(t,n);case ye(t):return n.sendGetBlockHeader?n.sendGetBlockHeader(t,n):async function(e,t={}){const n=null!==(e=await e).block.height;return null!==e.block.id?await async function(e,t){const n=t.unary||We,a=new I;return a.setId(Buffer.from(e.block.id,"hex")),it(e,await n(t.node,i.GetBlockHeaderByID,a))}(e,t):n?await async function(e,t){const n=t.unary||We,a=new b;return a.setHeight(Number(e.block.height)),it(e,await n(t.node,i.GetBlockHeaderByHeight,a))}(e,t):await async function(e,t){var n;const a=t.unary||We,r=new S;return null!=(n=e.block)&&n.isSealed&&r.setIsSealed(e.block.isSealed),it(e,await a(t.node,i.GetLatestBlockHeader,r))}(e,t)}(t,n);case ge(t):return n.sendGetBlockById?n.sendGetBlockById(t,n):async function(e,t={}){e=await e;const n=new h;n.setId(Buffer.from(e.block.id,"hex"));const a=(await We(t.node,i.GetBlockByID,n)).getBlock(),r=a.getCollectionGuaranteesList(),o=a.getBlockSealsList(),s=a.getSignaturesList(),c=Me();return c.tag=e.tag,c.block={id:lt(a.getId_asU8()),parentId:lt(a.getParentId_asU8()),height:a.getHeight(),timestamp:a.getTimestamp(),collectionGuarantees:r.map(e=>({collectionId:lt(e.getCollectionId_asU8()),signatures:e.getSignaturesList()})),blockSeals:o.map(e=>({blockId:lt(e.getBlockId_asU8()),executionReceiptId:lt(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()})),signatures:s},c}(t,n);case fe(t):return n.sendGetBlockByHeight?n.sendGetBlockByHeight(t,n):async function(e,t={}){e=await e;const n=new k;n.setHeight(Number(e.block.height));const a=(await We(t.node,i.GetBlockByHeight,n)).getBlock(),r=a.getCollectionGuaranteesList(),o=a.getBlockSealsList(),s=a.getSignaturesList(),c=Me();return c.tag=e.tag,c.block={id:dt(a.getId_asU8()),parentId:dt(a.getParentId_asU8()),height:a.getHeight(),timestamp:a.getTimestamp(),collectionGuarantees:r.map(e=>({collectionId:dt(e.getCollectionId_asU8()),signatures:e.getSignaturesList()})),blockSeals:o.map(e=>({blockId:dt(e.getBlockId_asU8()),executionReceiptId:dt(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()})),signatures:s},c}(t,n);case he(t):return n.sendGetCollection?n.sendGetCollection(t,n):async function(e,t={}){const n=t.unary||We;e=await e;const a=new v;a.setId(Buffer.from(e.collection.id,"hex"));const r=(await n(t.node,i.GetCollectionByID,a)).getCollection(),o=Me();return o.tag=e.tag,o.collection={id:gt(r.getId_asU8()),transactionIds:r.getTransactionIdsList().map(gt)},o}(t,n);case pe(t):return n.sendPing?n.sendPing(t,n):async function(e,t={}){const n=t.unary||We;e=await e;const a=new B;await n(t.node,i.Ping,a);let r=Me();return r.tag=e.tag,r}(t,n);default:return t}};function pt(e=null){return Se([ee,t=>(t.block.isSealed=e,F(t))])}function mt(e){return Se([W,t=>(t.account.addr=A(e),F(t))])}const yt=async(e,t,n)=>{try{return Number(e)}catch(e){throw new Error(`Decode Number Error : ${n.join(".")}`)}},ht=async e=>e,kt=async(e,t,n)=>{const a=await e.fields.reduce(async(e,a)=>((e=await e)[a.name]=await bt(a.value,t,[...n,a.name]),e),Promise.resolve({})),r=e.id&&It(t,e.id);return r?await r(a):a},wt={UInt:yt,Int:yt,UInt8:yt,Int8:yt,UInt16:yt,Int16:yt,UInt32:yt,Int32:yt,UInt64:yt,Int64:yt,UInt128:yt,Int128:yt,UInt256:yt,Int256:yt,Word8:yt,Word16:yt,Word32:yt,Word64:yt,UFix64:ht,Fix64:ht,String:ht,Character:ht,Bool:ht,Address:ht,Void:async()=>null,Optional:async(e,t,n)=>e?await bt(e,t,n):null,Reference:async e=>({address:e.address,type:e.type}),Array:async(e,t,n)=>await Promise.all(e.map(e=>new Promise(async a=>a(await bt(e,t,[...n,e.type]))))),Dictionary:async(e,t,n)=>await e.reduce(async(e,a)=>((e=await e)[await bt(a.key,t,[...n,a.key])]=await bt(a.value,t,[...n,a.key]),e),Promise.resolve({})),Event:kt,Resource:kt,Struct:kt,Enum:kt,Type:async e=>e.staticType,Path:async e=>({domain:e.domain,identifier:e.identifier}),Capability:async e=>({path:e.path,address:e.address,borrowType:e.borrowType})},It=(e,t)=>{const n=Object.keys(e).find(e=>/^\/.*\/$/.test(e)?new RegExp(e.substring(1,e.length-1)).test(t):e===t);return t&&n&&e[n]},bt=async(e,t,n)=>{let a=It(t,e.type);if(!a)throw new Error(`Undefined Decoder Error: ${e.type}@${n.join(".")}`);return await a(e.value,t,n)},St=async(e,t={},n=[])=>{let a=_({},wt,t);return await bt(e,a,n)},vt=async(e,t={})=>{let n=_({},wt,t);return e.encodedData?await St(e.encodedData,n):e.transactionStatus?_({},e.transactionStatus,{events:await Promise.all(e.transactionStatus.events.map(async function(e){return{type:e.type,transactionId:e.transactionId,transactionIndex:e.transactionIndex,eventIndex:e.eventIndex,data:await St(e.payload,n)}}))}):e.transaction?e.transaction:e.events?await Promise.all(e.events.map(async function(e){return{blockId:e.blockId,blockHeight:e.blockHeight,blockTimestamp:e.blockTimestamp,type:e.type,transactionId:e.transactionId,transactionIndex:e.transactionIndex,eventIndex:e.eventIndex,data:await St(e.payload,n)}})):e.account?e.account:e.block?e.block:e.blockHeader?e.blockHeader:e.latestBlock?(console.error("\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;"),e.latestBlock):e.transactionId?e.transactionId:e.collection?e.collection:null};function Bt(e){return async t=>se(t)?(t.message.refBlock||(t.message.refBlock=await async function(e){var t;return t=await Se(C(),[pt()]),t=await ft(t,e),(t=await vt(t)).id}(e)),F(t)):F(t)}const At=e=>"function"==typeof e,Et=e=>"string"==typeof e;async function Tt(t){if(se(t)||oe(t)){var n=Be(t,"ix.cadence");e(At(n)||Et(n),"Cadence needs to be a function or a string."),At(n)&&(n=await n({})),e(Et(n),"Cadence needs to be a string at this point."),t.message.cadence=await $e().where(/^0x/).then(e=>Object.entries(e).reduce((e,[t,n])=>e.replace(t,n),n))}return t}const Nt=e=>"function"==typeof e;function xt(t){return e(null!=typeof t.xform,`No type specified for argument: ${t.value}`),Nt(t.xform)?t.xform(t.value):Nt(t.xform.asArgument)?t.xform.asArgument(t.value):void e(!1,"Invalid Argument",t)}async function Lt(e){if(se(e)||oe(e))for(let[t,n]of Object.entries(e.arguments))e.arguments[t].asArgument=xt(n);return e}const _t=e=>Rt(Pt(Ht(e))),Ot=e=>Rt(Pt(zt(e))),Gt=(e,t)=>Buffer.from(e.padStart(2*t,0),"hex"),Ct=(Ut=Buffer.from("FLOW-V0.0-transaction").toString("hex"),Buffer.from(Ut.padEnd(64,0),"hex")).toString("hex");var Ut;const Rt=e=>Ct+e,Dt=e=>Gt(e,8),Kt=e=>Buffer.from(JSON.stringify(e),"utf8"),Ft=e=>Buffer.from(e,"utf8"),Pt=e=>x(e).toString("hex"),Ht=e=>{return qt(e),[Ft(e.cadence),e.arguments.map(Kt),(t=e.refBlock,Gt(t,32)),e.computeLimit,Dt(e.proposalKey.address),e.proposalKey.keyId,e.proposalKey.sequenceNum,Dt(e.payer),e.authorizers.map(Dt)];var t},zt=e=>(Jt(e),[Ht(e),jt(e)]),jt=e=>{const t=$t(e);return e.payloadSigs.map(e=>({signerIndex:t.get(e.address),keyId:e.keyId,sig:e.sig})).sort((e,t)=>e.signerIndex>t.signerIndex?1:e.signerIndex<t.signerIndex?-1:e.keyId>t.keyId?1:e.keyId<t.keyId?-1:void 0).map(e=>{return[e.signerIndex,e.keyId,(t=e.sig,Buffer.from(t,"hex"))];var t})},$t=e=>{const t=new Map;let n=0;const a=e=>{t.has(e)||(t.set(e,n),n++)};return a(e.proposalKey.address),a(e.payer),e.authorizers.forEach(a),t},qt=e=>{Xt.forEach(t=>tn(e,t)),Zt.forEach(t=>tn(e.proposalKey,t,"proposalKey"))},Jt=e=>{Qt.forEach(t=>tn(e,t)),e.payloadSigs.forEach((e,t)=>{en.forEach(n=>tn(e,n,"payloadSigs",t))})},Mt=e=>"number"==typeof e,Wt=e=>"string"==typeof e,Yt=e=>null!==e&&"object"==typeof e,Vt=e=>Yt(e)&&e instanceof Array,Xt=[{name:"cadence",check:Wt},{name:"arguments",check:Vt},{name:"refBlock",check:Wt,defaultVal:"0"},{name:"computeLimit",check:Mt},{name:"proposalKey",check:Yt},{name:"payer",check:Wt},{name:"authorizers",check:Vt}],Zt=[{name:"address",check:Wt},{name:"keyId",check:Mt},{name:"sequenceNum",check:Mt}],Qt=[{name:"payloadSigs",check:Vt}],en=[{name:"address",check:Wt},{name:"keyId",check:Mt},{name:"sig",check:Wt}],tn=(e,t,n,a)=>{const{name:r,check:o,defaultVal:s}=t;if(null==e[r]&&null!=s&&(e[r]=s),null==e[r])throw an(r,n,a);if(!o(e[r]))throw rn(r,n,a)},nn=(e,t,n)=>t?null==n?`${t}.${e}`:`${t}.${n}.${e}`:e,an=(e,t,n)=>new Error(`Missing field ${nn(e,t,n)}`),rn=(e,t,n)=>new Error(`Invalid field ${nn(e,t,n)}`);async function on(e){if(se(e))try{let t=sn(e);const n=_t(dn(e));await Promise.all(t.map(un(e,n)));let a=cn(e);const r=Ot(_({},dn(e),{payloadSigs:t.map(t=>({address:e.accounts[t].addr,keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}))}));await Promise.all(a.map(un(e,r)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e}function sn(e){let t=new Set(e.authorizations);return t.add(e.proposer),t.delete(e.payer),Array.from(t)}function cn(e){let t=new Set([e.payer]);return Array.from(t)}function un(e,t){return async function(n){const a=e.accounts[n];if(null!=a.signature)return;const{signature:r}=await a.signingFunction(function(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:A(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(e=>n.arguments[e].asArgument),data:{},interaction:n,voucher:ln(n)}}catch(e){throw console.error("buildSignable",e),e}}(a,t,e));e.accounts[n].signature=r}}const ln=e=>({cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(t=>e.arguments[t].asArgument),proposalKey:{address:E(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:E(e.accounts[e.payer].addr),authorizers:e.authorizations.map(t=>E(e.accounts[t].addr)).reduce((e,t)=>e.find(e=>e===t)?e:[...e,t],[]),payloadSigs:sn(e).map(t=>({address:E(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature})),envelopeSigs:cn(e).map(t=>({address:E(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}))});function dn(e){return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(t=>e.arguments[t].asArgument),proposalKey:{address:A(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:A(e.accounts[e.payer].addr),authorizers:e.authorizations.map(t=>A(e.accounts[t].addr)).reduce((e,t)=>e.find(e=>e===t)?e:[...e,t],[])}}function gn(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(e=>t.arguments[e].asArgument),data:{},interaction:t,voucher:ln(t)}}catch(e){throw console.error("buildPreSignable",e),e}}async function fn(t,n,a,r=3){e(r,"Account Resolve Recursion Limit Exceeded",{ix:t,accounts:n});let o=[];for(let e of n){var s=a||e;"function"==typeof e.resolve&&(e=await e.resolve(e,gn(e,t))),Array.isArray(e)?await fn(t,e,s,r-1):(null!=e.addr&&null!=e.keyId&&(e.tempId=`${e.addr}-${e.keyId}`),t.accounts[e.tempId]=t.accounts[e.tempId]||e,t.accounts[e.tempId].role.proposer=t.accounts[e.tempId].role.proposer||e.role.proposer,t.accounts[e.tempId].role.payer=t.accounts[e.tempId].role.payer||e.role.payer,t.accounts[e.tempId].role.authorizer=t.accounts[e.tempId].role.authorizer||e.role.authorizer,t.accounts[e.tempId].role.proposer&&t.proposer===s.tempId&&(t.proposer=e.tempId),t.accounts[e.tempId].role.payer&&t.payer===s.tempId&&(t.payer=e.tempId),t.accounts[e.tempId].role.authorizer&&(a?o=Array.from(new Set([...o,e.tempId])):t.authorizations=t.authorizations.map(t=>t===s.tempId?e.tempId:t))),s.tempId!=e.tempId&&delete t.accounts[s.tempId]}a&&(t.authorizations=t.authorizations.map(e=>e===a.tempId?o:e).reduce((e,t)=>Array.isArray(t)?[...e,...t]:[...e,t],[]))}async function pn(e){if(se(e))try{await fn(e,Object.values(e.accounts)),await fn(e,Object.values(e.accounts))}catch(e){throw console.error("=== SAD PANDA ===\n\n",e,"\n\n=== SAD PANDA ==="),e}return e}async function mn(e){const t=Be(e,"ix.validators",[]);return Se(e,t.map(e=>t=>e(t,{Ok:F,Bad:P})))}async function yn(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=A(e.accounts[t].addr);return e}const hn=e=>e,kn=(e,t=hn)=>async n=>(await $e.get(`debug.${e}`)&&await t(n,(...t)=>{console.log(`debug[${e}] ---\n`,...t,"\n\n\n---")},e=>["\nAccounts:",{proposer:e.proposer,authorizations:e.authorizations,payer:e.payer},"\n\nDetails:",e.accounts].filter(Boolean)),n),wn=Se([Tt,kn("cadence",(e,t)=>t(e.message.cadence)),Lt,kn("arguments",(e,t)=>t(e.message.arguments,e.message)),pn,kn("accounts",(e,t,n)=>t(...n(e))),async function(e){if(se(e)&&null==e.message.refBlock){const t=await $e.first(["sdk.transport","sdk.send"],ft);e.message.refBlock=(await t(Ne([pt()])).then(vt)).id}return e},async function(t){if(se(t)){const a=await $e.first(["sdk.transport","sdk.send"],ft);var n=Object.values(t.accounts).find(e=>e.role.proposer);e(n,"Transactions require a proposer"),null==n.sequenceNum&&(t.accounts[n.tempId].sequenceNum=await a(await Ne([mt(n.addr)])).then(vt).then(e=>e.keys).then(e=>e.find(e=>e.index===n.keyId)).then(e=>e.sequenceNumber))}return t},on,kn("signatures",(e,t,n)=>t(...n(e))),yn,mn,kn("resolved",(e,t)=>t(e))]),In=async(e=[],t={})=>{const n=await $e.first(["sdk.transport","sdk.send"],t.send||ft),a=await $e.first(["sdk.resolve"],t.resolve||wn);return Array.isArray(e)&&(e=Se(C(),e)),n(await a(e),t)};async function bn(e){const t=await $e().where(/^decoder\./),n=Object.entries(t).map(([e,t])=>[e=`/${e.replace(/^decoder\./,"")}$/`,t]);return vt(e,Object.fromEntries(n))}class Sn extends Error{constructor(e){super(`\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${e}. \n        Please ensure the address: ${e} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim()),this.name="Unable To Determine Message Encoding For Signer Addresss"}}const vn=(e,t)=>{let n=(e=>{let t=new Set(e.authorizers);return t.add(e.proposalKey.address),t.delete(e.payer),Array.from(t).map(E)})(e.voucher),a=(e=>{let t=new Set([e.payer]);return Array.from(t).map(E)})(e.voucher);const r=n.includes(E(t)),o=a.includes(E(t));if(!r&&!o)throw new Sn(t);const s={cadence:e.voucher.cadence,refBlock:e.voucher.refBlock,computeLimit:e.voucher.computeLimit,arguments:e.voucher.arguments,proposalKey:_({},e.voucher.proposalKey,{address:A(e.voucher.proposalKey.address)}),payer:A(e.voucher.payer),authorizers:e.voucher.authorizers.map(A),payloadSigs:e.voucher.payloadSigs.map(e=>_({},e,{address:A(e.address)}))};return r?_t(s):Ot(s)};function Bn(...e){let t=e[1]||("object"==typeof e[0]?e[0]:void 0),n="boolean"==typeof e[0]?e[0]:void 0;return"object"==typeof e[0]&&console.warn("\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing options as the first arguement to the latestBlock function has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0007-deprecate-opts-first-arg-latest-block\n  \n      ============================\n    ","font-weight:bold;font-family:monospace;"),In([pt(n)],t).then(vt)}function An(e,t){return In([mt(e)],t).then(vt)}function En(e=[]){return Se(e.map(e=>z(e,{role:"authorizer"})))}function Tn(e,t,n,a){return{addr:e,signingFunction:t,keyId:n,sequenceNum:a}}function Nn(e){return Ee("ix.validators",t=>Array.isArray(t)?t.push(e):[e])}function xn(e){return Se([t=>(t.block.height=e,t),Nn(e=>{if("boolean"==typeof e.block.isSealed)throw new Error("Unable to specify both block height and isSealed.");if(e.block.id)throw new Error("Unable to specify both block height and block id.");return e})])}function Ln(e){return Se([t=>(t.block.id=e,F(t)),Nn((e,{Ok:t,Bad:n})=>ue(e)?n(e,"Unable to specify a block id with a Get Account interaction."):"boolean"==typeof e.block.isSealed?n(e,"Unable to specify both block id and isSealed."):e.block.height?n(e,"Unable to specify both block id and block height."):t(e))])}function _n(e,t,n){return void 0===t&&void 0===n||console.warn("\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    ","font-weight:bold;font-family:monospace;"),Se([Y,a=>(a.events.eventType=e,a.events.start=t,a.events.end=n,F(a))])}function On(e,t,n){return Se([Y,a=>(a.events.eventType=e,a.events.start=t,a.events.end=n,F(a))])}function Gn(e,t=[]){return Se([Y,n=>(n.events.eventType=e,n.events.blockIds=t,F(n))])}function Cn(e=null){return Se([te,t=>(t.block.isSealed=e,F(t))])}function Un(e=!1){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getLatestBlock builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0006-deprecate-get-latest-block-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),Se([V,t=>(t.block.isSealed=e,F(t))])}function Rn(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockById builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0004-deprecate-get-block-by-id-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),Se([X,t=>(t.block.ids=[e],F(t))])}function Dn(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockByHeight builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0003-deprecate-get-block-by-height-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),Se([Z,t=>(t.block.height=e,F(t))])}function Kn(e=null){return Se([ne,t=>(t.collection.id=e,t)])}function Fn(e){return Se([J,t=>(t.transaction.id=e,F(t))])}function Pn(e){return Se([M,t=>(t.transaction.id=e,F(t))])}function Hn(e){return t=>(t.message.computeLimit=e,t)}function zn(e=[]){return Se(e.map(j))}function jn(e,t){return{value:e,xform:t}}async function $n(e){return z(e,{role:"proposer"})}async function qn(e){return z(e,{role:"payer"})}function Jn(){return Q}function Mn(e){return Se([t=>(t.message.refBlock=e,F(t))])}function Wn(...e){return Se([$,Ae("ix.cadence",L(...e))])}const Yn=[];function Vn(...e){return Se([q,Ae("ix.cadence",L(...e)),e=>(e.message.computeLimit=e.message.computeLimit||10,e.message.refBlock=e.message.refBlock||null,e.authorizations=e.authorizations||Yn,F(e))])}function Xn(...e){if(e.length>1){const[t,n]=e;return Xn((e,{Ok:a,Bad:r})=>t?a(e):r(e,n))}const[t]=e;return e=>t(e,{Ok:F,Bad:P})}const Zn=({node:e})=>async t=>{if(!se(t))return F(t);if(t.accounts[t.proposer].sequenceNum)return F(t);const n=await ft(await Ne([mt(t.accounts[t.proposer].addr)]),{node:e}),a=await vt(n);return t.accounts[t.proposer].sequenceNum=a.keys[t.accounts[t.proposer].keyId].sequenceNumber,F(t)},Qn=e=>e,ea=["tempId"];function ta(e){return["SIGNATURE",e.addr,e.keyId].join(".")}function na(e={}){return function(t){const n=_({},t,e,{signingFunction:e.signingFunction||t.signingFunction||function(e){return{addr:n.addr,keyId:n.keyId,signature:ta(n)}}});return n}}const aa={proposer:!1,authorizer:!1,payer:!1};var ra={__proto__:null,mockSend:function(t=Qn){return async function(n){switch(n=await n,!0){case ue(n):return function(t,n=5){return e(t.account,"mockAccountResponse(ix) -- ix.account is missing",t),e(t.account.addr,"mockAccountResponse(ix) -- ix.account.addr is missing",t),{account:{addr:t.account.addr,keys:Array.from({length:n},(e,t)=>({index:t,sequenceNumber:42}))}}}(n);case me(n):return{tag:"GET_BLOCK",block:{id:"32"}};default:return t(n)}}},authzFn:na,authzResolve:function(e={}){return function(t){const{tempId:n}=e;return _({},t,{tempId:n||"WITH_RESOLVE",resolve:na(function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(r[n]=e[n]);return r}(e,ea))})}},authzResolveMany:function(e={}){return function(t){return _({},t,{tempId:e.tempId||"AUTHZ_RESOLVE_MANY",resolve:()=>[e.proposer&&na(e.proposer)({role:_({},aa,{proposer:!0})}),...e.authorizations.map(na).map(e=>e({role:_({},aa,{authorizer:!0})})),e.payer&&na(e.payer)({role:_({},aa,{payer:!0})})].filter(Boolean)})}},sig:ta,idof:e=>`${e.addr}-${e.keyId}`,run:(e=[])=>Ne([Mn("123"),...e]).then(wn)};const oa="0.0.54",sa=e=>{(({name:e,transitionsPath:t})=>{console.error(`\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${e} builder has been removed from the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${t}\n    ============================\n  `,"font-weight:bold;font-family:monospace;")})({name:"params",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"})},ca=e=>(({name:e,transitionsPath:t})=>{console.warn(`\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${e} builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${t}\n    ============================\n  `,"font-weight:bold;font-family:monospace;")})({name:"param",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"});export{ra as TestUtils,oa as VERSION,An as account,jn as arg,zn as args,xn as atBlockHeight,Ln as atBlockId,Tn as authorization,En as authorizations,Ne as build,$e as config,ln as createSignableVoucher,bn as decode,Te as destroy,vn as encodeMessageFromSignable,Be as get,mt as getAccount,pt as getBlock,Dn as getBlockByHeight,Rn as getBlockById,Cn as getBlockHeader,Kn as getCollection,_n as getEvents,On as getEventsAtBlockHeightRange,Gn as getEventsAtBlockIds,Un as getLatestBlock,Pn as getTransaction,Fn as getTransactionStatus,C as interaction,Xn as invariant,we as isBad,ue as isGetAccount,me as isGetBlock,fe as isGetBlockByHeight,ge as isGetBlockById,ye as isGetBlockHeader,he as isGetCollection,le as isGetEvents,de as isGetLatestBlock,ie as isGetTransaction,ce as isGetTransactionStatus,ke as isOk,pe as isPing,oe as isScript,se as isTransaction,re as isUnknown,Bn as latestBlock,Hn as limit,ca as param,sa as params,qn as payer,Jn as ping,Se as pipe,$n as proposer,Ae as put,Mn as ref,wn as resolve,pn as resolveAccounts,Lt as resolveArguments,Tt as resolveCadence,yn as resolveFinalNormalization,Zn as resolveProposerSequenceNumber,Bt as resolveRefBlockId,on as resolveSignatures,mn as resolveValidators,Wn as script,In as send,Vn as transaction,Ee as update,Nn as validator,Ie as why};
//# sourceMappingURL=sdk.modern.js.map
