{"version":3,"file":"sdk.umd.js","sources":["../src/interaction/interaction.js","../src/build/build.js","../src/config/index.js","../src/response/response.js","../src/send/unary.js","../src/send/send-transaction.js","../src/send/send-get-transaction.js","../src/send/send-execute-script.js","../src/send/send-get-account.js","../src/send/send-get-events.js","../src/send/send-get-block.js","../src/send/send-get-block-header.js","../src/send/send-get-latest-block.js","../src/send/send-get-block-by-id.js","../src/send/send-get-block-by-height.js","../src/send/send-get-collection.js","../src/send/sdk-send.js","../src/send/send-get-transaction-status.js","../src/send/send-ping.js","../src/build/build-get-block.js","../src/build/build-get-account.js","../src/decode/decode.js","../src/encode/encode.js","../src/resolve/resolve-cadence.js","../src/resolve/resolve-arguments.js","../src/resolve/resolve-signatures.js","../src/resolve/resolve-accounts.js","../src/resolve/resolve-validators.js","../src/resolve/resolve-final-normalization.js","../src/resolve/resolve.js","../src/send/send.js","../src/wallet-utils/encode-signable.js","../src/build/build-validator.js","../src/build/build-ref.js","../src/build/build-transaction.js","../src/test-utils/mock-send.js","../src/test-utils/authz-fn.js","../src/test-utils/run.js","../src/VERSION.js","../src/account/account.js","../src/build/build-arguments.js","../src/build/build-at-block-height.js","../src/build/build-at-block-id.js","../src/build/build-authorizations.js","../src/decode/sdk-decode.js","../src/build/build-get-block-by-height.js","../src/build/build-get-block-by-id.js","../src/build/build-get-block-header.js","../src/build/build-get-collection.js","../src/build/build-get-events.js","../src/build/build-get-events-at-block-height-range.js","../src/build/build-get-events-at-block-ids.js","../src/build/build-get-latest-block.js","../src/build/build-get-transaction.js","../src/build/build-get-transaction-status.js","../src/build/build-invariant.js","../src/latest-block/latest-block.js","../src/build/build-limit.js","../src/sdk.js","../src/utils/deprecate.js","../src/build/build-payer.js","../src/build/build-ping.js","../src/build/build-proposer.js","../src/resolve/resolve-proposer-sequence-number.js","../src/resolve/resolve-ref-block-id.js","../src/build/build-script.js"],"sourcesContent":["import {invariant} from \"@onflow/util-invariant\"\n\nexport const UNKNOWN /*                       */ = \"UNKNOWN\"\nexport const SCRIPT /*                        */ = \"SCRIPT\"\nexport const TRANSACTION /*                   */ = \"TRANSACTION\"\nexport const GET_TRANSACTION_STATUS /*        */ = \"GET_TRANSACTION_STATUS\"\nexport const GET_ACCOUNT /*                   */ = \"GET_ACCOUNT\"\nexport const GET_EVENTS /*                    */ = \"GET_EVENTS\"\nexport const GET_LATEST_BLOCK /*              */ = \"GET_LATEST_BLOCK\"\nexport const PING /*                          */ = \"PING\"\nexport const GET_TRANSACTION /*               */ = \"GET_TRANSACTION\"\nexport const GET_BLOCK_BY_ID /*               */ = \"GET_BLOCK_BY_ID\"\nexport const GET_BLOCK_BY_HEIGHT /*           */ = \"GET_BLOCK_BY_HEIGHT\"\nexport const GET_BLOCK /*                     */ = \"GET_BLOCK\"\nexport const GET_BLOCK_HEADER /*              */ = \"GET_BLOCK_HEADER\"\nexport const GET_COLLECTION /*                */ = \"GET_COLLECTION\"\n\nexport const BAD /* */ = \"BAD\"\nexport const OK /*  */ = \"OK\"\n\nexport const ACCOUNT /*  */ = \"ACCOUNT\"\nexport const PARAM /*    */ = \"PARAM\"\nexport const ARGUMENT /* */ = \"ARGUMENT\"\n\nexport const AUTHORIZER /* */ = \"authorizer\"\nexport const PAYER /*      */ = \"payer\"\nexport const PROPOSER /*   */ = \"proposer\"\n\nconst ACCT = `{\n  \"kind\":\"${ACCOUNT}\",\n  \"tempId\":null,\n  \"addr\":null,\n  \"keyId\":null,\n  \"sequenceNum\":null,\n  \"signature\":null,\n  \"signingFunction\":null,\n  \"resolve\":null,\n  \"role\": {\n    \"proposer\":false,\n    \"authorizer\":false,\n    \"payer\":false,\n    \"param\":false\n  }\n}`\n\nconst PRM = `{\n  \"kind\":\"${PARAM}\",\n  \"tempId\":null,\n  \"key\":null,\n  \"value\":null,\n  \"asParam\":null,\n  \"xform\":null,\n  \"resolve\": null\n}`\n\nconst ARG = `{\n  \"kind\":\"${ARGUMENT}\",\n  \"tempId\":null,\n  \"value\":null,\n  \"asArgument\":null,\n  \"xform\":null,\n  \"resolve\": null\n}`\n\nconst IX = `{\n  \"tag\":\"${UNKNOWN}\",\n  \"assigns\":{},\n  \"status\":\"${OK}\",\n  \"reason\":null,\n  \"accounts\":{},\n  \"params\":{},\n  \"arguments\":{},\n  \"message\": {\n    \"cadence\":null,\n    \"refBlock\":null,\n    \"computeLimit\":null,\n    \"proposer\":null,\n    \"payer\":null,\n    \"authorizations\":[],\n    \"params\":[],\n    \"arguments\":[]\n  },\n  \"proposer\":null,\n  \"authorizations\":[],\n  \"payer\":null,\n  \"events\": {\n    \"eventType\":null,\n    \"start\":null,\n    \"end\":null,\n    \"blockIds\":[]\n  },\n  \"transaction\": {\n    \"id\":null\n  },\n  \"block\": {\n    \"id\":null,\n    \"height\":null,\n    \"isSealed\":null\n  },\n  \"account\": {\n    \"addr\":null\n  },\n  \"collection\": {\n    \"id\":null\n  }\n}`\n\nconst KEYS = new Set(Object.keys(JSON.parse(IX)))\n\nexport const interaction = () => JSON.parse(IX)\n\nconst CHARS = \"abcdefghijklmnopqrstuvwxyz0123456789\".split(\"\")\nconst randChar = () => CHARS[~~(Math.random() * CHARS.length)]\nexport const uuid = () => Array.from({length: 10}, randChar).join(\"\")\nexport const isNumber = d => typeof d === \"number\"\nexport const isArray = d => Array.isArray(d)\nexport const isObj = d => d !== null && typeof d === \"object\"\nexport const isNull = d => d == null\nexport const isFn = d => typeof d === \"function\"\n\nexport const isInteraction = ix => {\n  if (!isObj(ix) || isNull(ix) || isNumber(ix)) return false\n  for (let key of KEYS) if (!ix.hasOwnProperty(key)) return false\n  return true\n}\n\nexport const Ok = ix => {\n  ix.status = OK\n  return ix\n}\n\nexport const Bad = (ix, reason) => {\n  ix.status = BAD\n  ix.reason = reason\n  return ix\n}\n\nconst makeIx = wat => ix => {\n  ix.tag = wat\n  return Ok(ix)\n}\n\nexport const prepAccount = (acct, opts = {}) => ix => {\n  invariant(\n    typeof acct === \"function\" || typeof acct === \"object\",\n    \"prepAccount must be passed an authorization function or an account object\"\n  )\n  invariant(opts.role != null, \"Account must have a role\")\n\n  const ACCOUNT = JSON.parse(ACCT)\n  const role = opts.role\n  const tempId = uuid()\n\n  acct = typeof acct === \"function\" ? {resolve: acct} : acct\n\n  ix.accounts[tempId] = {\n    ...ACCOUNT,\n    tempId,\n    ...acct,\n    role: {\n      ...ACCOUNT.role,\n      ...(typeof acct.role === \"object\" ? acct.role : {}),\n      [role]: true,\n    },\n  }\n\n  if (role === AUTHORIZER) {\n    ix.authorizations.push(tempId)\n  } else {\n    ix[role] = tempId\n  }\n\n  return ix\n}\n\nexport const makeArgument = arg => ix => {\n  let tempId = uuid()\n  ix.message.arguments.push(tempId)\n\n  ix.arguments[tempId] = JSON.parse(ARG)\n  ix.arguments[tempId].tempId = tempId\n  ix.arguments[tempId].value = arg.value\n  ix.arguments[tempId].asArgument = arg.asArgument\n  ix.arguments[tempId].xform = arg.xform\n  ix.arguments[tempId].resolve = arg.resolve\n  return Ok(ix)\n}\n\nexport const makeUnknown /*                 */ = makeIx(UNKNOWN)\nexport const makeScript /*                  */ = makeIx(SCRIPT)\nexport const makeTransaction /*             */ = makeIx(TRANSACTION)\nexport const makeGetTransactionStatus /*    */ = makeIx(GET_TRANSACTION_STATUS)\nexport const makeGetTransaction /*          */ = makeIx(GET_TRANSACTION)\nexport const makeGetAccount /*              */ = makeIx(GET_ACCOUNT)\nexport const makeGetEvents /*               */ = makeIx(GET_EVENTS)\nexport const makeGetLatestBlock /*          */ = makeIx(GET_LATEST_BLOCK)\nexport const makeGetBlockById /*            */ = makeIx(GET_BLOCK_BY_ID)\nexport const makeGetBlockByHeight /*        */ = makeIx(GET_BLOCK_BY_HEIGHT)\nexport const makePing /*                    */ = makeIx(PING)\nexport const makeGetBlock /*                */ = makeIx(GET_BLOCK)\nexport const makeGetBlockHeader /*          */ = makeIx(GET_BLOCK_HEADER)\nexport const makeGetCollection /*           */ = makeIx(GET_COLLECTION)\n\nconst is = wat => ix => ix.tag === wat\n\nexport const isUnknown /*                 */ = is(UNKNOWN)\nexport const isScript /*                  */ = is(SCRIPT)\nexport const isTransaction /*             */ = is(TRANSACTION)\nexport const isGetTransactionStatus /*    */ = is(GET_TRANSACTION_STATUS)\nexport const isGetTransaction /*          */ = is(GET_TRANSACTION)\nexport const isGetAccount /*              */ = is(GET_ACCOUNT)\nexport const isGetEvents /*               */ = is(GET_EVENTS)\nexport const isGetLatestBlock /*          */ = is(GET_LATEST_BLOCK)\nexport const isGetBlockById /*            */ = is(GET_BLOCK_BY_ID)\nexport const isGetBlockByHeight /*        */ = is(GET_BLOCK_BY_HEIGHT)\nexport const isPing /*                    */ = is(PING)\nexport const isGetBlock /*                */ = is(GET_BLOCK)\nexport const isGetBlockHeader /*          */ = is(GET_BLOCK_HEADER)\nexport const isGetCollection /*           */ = is(GET_COLLECTION)\n\nexport const isOk /*  */ = ix => ix.status === OK\nexport const isBad /* */ = ix => ix.status === BAD\nexport const why /*   */ = ix => ix.reason\n\nexport const isAccount /*  */ = account => account.kind === ACCOUNT\nexport const isParam /*    */ = param => param.kind === PARAM\nexport const isArgument /* */ = argument => argument.kind === ARGUMENT\n\nconst hardMode = ix => {\n  for (let key of Object.keys(ix)) {\n    if (!KEYS.has(key))\n      throw new Error(`\"${key}\" is an invalid root level Interaction property.`)\n  }\n  return ix\n}\n\nconst recPipe = async (ix, fns = []) => {\n  try {\n    ix = hardMode(await ix)\n    if (isBad(ix)) throw new Error(`Interaction Error: ${ix.reason}`)\n    if (!fns.length) return ix\n    const [hd, ...rest] = fns\n    const cur = await hd\n    if (isFn(cur)) return recPipe(cur(ix), rest)\n    if (isNull(cur) || !cur) return recPipe(ix, rest)\n    if (isInteraction(cur)) return recPipe(cur, rest)\n    throw new Error(\"Invalid Interaction Composition\")\n  } catch (e) {\n    throw e\n  }\n}\n\nexport const pipe = (...args) => {\n  const [arg1, arg2] = args\n  if (isArray(arg1) && arg2 == null) return d => pipe(d, arg1)\n  return recPipe(arg1, arg2)\n}\n\nconst identity = v => v\n\nexport const get = (ix, key, fallback) => {\n  return ix.assigns[key] == null ? fallback : ix.assigns[key]\n}\n\nexport const put = (key, value) => ix => {\n  ix.assigns[key] = value\n  return Ok(ix)\n}\n\nexport const update = (key, fn = identity) => ix => {\n  ix.assigns[key] = fn(ix.assigns[key], ix)\n  return Ok(ix)\n}\n\nexport const destroy = key => ix => {\n  delete ix.assigns[key]\n  return Ok(ix)\n}\n","import {pipe, interaction} from \"../interaction/interaction.js\"\n\nexport function build(fns = []) {\n  return pipe(interaction(), fns)\n}\n","import {\n  spawn,\n  send,\n  subscriber,\n  SUBSCRIBE,\n  UNSUBSCRIBE,\n} from \"@onflow/util-actor\"\n\nconst NAME = \"config\"\nconst PUT = \"PUT_CONFIG\"\nconst GET = \"GET_CONFIG\"\nconst GET_ALL = \"GET_ALL_CONFIG\"\nconst UPDATE = \"UPDATE_CONFIG\"\nconst DELETE = \"DELETE_CONFIG\"\nconst CLEAR = \"CLEAR_CONFIG\"\nconst WHERE = \"WHERE_CONFIG\"\nconst UPDATED = \"CONFIG/UPDATED\"\n\nconst identity = v => v\n\nconst HANDLERS = {\n  [PUT]: (ctx, _letter, {key, value}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/put.\")\n    ctx.put(key, value)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [GET]: (ctx, letter, {key, fallback}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/get\")\n    letter.reply(ctx.get(key, fallback))\n  },\n  [GET_ALL]: (ctx, letter) => {\n    letter.reply({...ctx.all()})\n  },\n  [UPDATE]: (ctx, letter, {key, fn}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/update\")\n    ctx.update(key, fn || identity)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [DELETE]: (ctx, letter, {key}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/delete\")\n    ctx.delete(key)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [CLEAR]: (ctx, letter) => {\n    let keys = Object.keys(ctx.all())\n    for (let key of keys) ctx.delete(key)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [WHERE]: (ctx, letter, {pattern}) => {\n    if (pattern == null) throw new Error(\"Missing 'pattern' for config/where\")\n    letter.reply(ctx.where(pattern))\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, {...ctx.all()})\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n}\n\nspawn(HANDLERS, NAME)\n\nfunction put(key, value) {\n  send(NAME, PUT, {key, value})\n  return config()\n}\n\nfunction get(key, fallback) {\n  return send(NAME, GET, {key, fallback}, {expectReply: true, timeout: 10})\n}\n\nasync function first(wants = [], fallback) {\n  if (!wants.length) return fallback\n  const [head, ...rest] = wants\n  const ret = await get(head)\n  if (ret == null) return first(rest, fallback)\n  return ret\n}\n\nfunction all() {\n  return send(NAME, GET_ALL, null, {expectReply: true, timeout: 10})\n}\n\nfunction update(key, fn = identity) {\n  send(NAME, UPDATE, {key, fn})\n  return config()\n}\n\nfunction _delete(key) {\n  send(NAME, DELETE, {key})\n  return config()\n}\n\nfunction where(pattern) {\n  return send(NAME, WHERE, {pattern}, {expectReply: true, timeout: 10})\n}\n\nfunction subscribe(callback) {\n  return subscriber(NAME, () => spawn(HANDLERS, NAME), callback)\n}\n\nexport function clearConfig() {\n  return send(NAME, CLEAR)\n}\n\nfunction config(values) {\n  if (values != null && typeof values === \"object\") {\n    Object.keys(values).map(d => put(d, values[d]))\n  }\n\n  return {\n    put,\n    get,\n    all,\n    first,\n    update,\n    delete: _delete,\n    where,\n    subscribe,\n    overload,\n  }\n}\n\nconfig.put = put\nconfig.get = get\nconfig.all = all\nconfig.first = first\nconfig.update = update\nconfig.delete = _delete\nconfig.where = where\nconfig.subscribe = subscribe\nconfig.overload = overload\n\nexport {config}\n\nconst noop = v => v\nfunction overload(opts = {}, callback = noop) {\n  return new Promise(async (resolve, reject) => {\n    const oldConfig = await all()\n    try {\n      config(opts)\n      var result = await callback(await all())\n      await clearConfig()\n      await config(oldConfig)\n      resolve(result)\n    } catch (error) {\n      await clearConfig()\n      await config(oldConfig)\n      reject(error)\n    }\n  })\n}\n","const DEFAULT_RESPONSE = `{\n    \"tag\":null,\n    \"transaction\":null,\n    \"transactionStatus\":null,\n    \"transactionId\":null,\n    \"encodedData\":null,\n    \"events\":null,\n    \"account\":null,\n    \"block\":null,\n    \"blockHeader\":null,\n    \"latestBlock\":null,\n    \"collection\":null\n}`\n\nexport const response = () => JSON.parse(DEFAULT_RESPONSE)\n","import {grpc} from \"@improbable-eng/grpc-web\"\nimport {NodeHttpTransport} from \"@improbable-eng/grpc-web-node-http-transport\"\nimport {config} from \"../config\"\n\ngrpc.setDefaultTransport(NodeHttpTransport())\n\nexport async function unary(host, method, request) {\n  const metadataFromConfig = await config().get(\"grpc.metadata\", {})\n  return new Promise((resolve, reject) => {\n    grpc.unary(method, {\n      request: request,\n      host: host,\n      metadata: new grpc.Metadata(metadataFromConfig),\n      onEnd: ({status, statusMessage, message}) => {\n        if (status === grpc.Code.OK) {\n          resolve(message)\n        } else {\n          reject(new Error(statusMessage))\n        }\n      },\n    })\n  })\n}\n","import {AccessAPI, Transaction, SendTransactionRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst paddedHexBuffer = (hex, pad) =>\n  Buffer.from(hex.padStart(pad * 2, 0), \"hex\")\nconst scriptBuffer = script => Buffer.from(script, \"utf8\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\nconst addressBuffer = addr => paddedHexBuffer(addr, 8)\nconst argumentBuffer = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\n\nexport async function sendTransaction(ix, opts = {}) {\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const tx = new Transaction()\n  tx.setScript(scriptBuffer(ix.message.cadence))\n  tx.setGasLimit(ix.message.computeLimit)\n  tx.setReferenceBlockId(\n    ix.message.refBlock ? hexBuffer(ix.message.refBlock) : null\n  )\n  tx.setPayer(addressBuffer(sansPrefix(ix.accounts[ix.payer].addr)))\n  ix.message.arguments.forEach(arg =>\n    tx.addArguments(argumentBuffer(ix.arguments[arg].asArgument))\n  )\n  ix.authorizations\n    .map(tempId => ix.accounts[tempId].addr)\n    .reduce((prev, current) => {\n      return prev.find(item => item === current) ? prev : [...prev, current]\n    }, [])\n    .forEach(addr => tx.addAuthorizers(addressBuffer(sansPrefix(addr))))\n\n  const proposalKey = new Transaction.ProposalKey()\n  proposalKey.setAddress(\n    addressBuffer(sansPrefix(ix.accounts[ix.proposer].addr))\n  )\n  proposalKey.setKeyId(ix.accounts[ix.proposer].keyId)\n  proposalKey.setSequenceNumber(ix.accounts[ix.proposer].sequenceNum)\n\n  tx.setProposalKey(proposalKey)\n\n  // Apply Non Payer Signatures to Payload Signatures\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (!acct.role.payer && acct.signature != null) {\n        const sig = new Transaction.Signature()\n        sig.setAddress(addressBuffer(sansPrefix(acct.addr)))\n        sig.setKeyId(acct.keyId)\n        sig.setSignature(hexBuffer(acct.signature))\n        tx.addPayloadSignatures(sig)\n      }\n    } catch (error) {\n      console.error(\"Trouble applying payload signature\", {acct, ix})\n      throw error\n    }\n  }\n\n  // Apply Payer Signatures to Envelope Signatures\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (acct.role.payer && acct.signature != null) {\n        const sig = new Transaction.Signature()\n        sig.setAddress(addressBuffer(sansPrefix(acct.addr)))\n        sig.setKeyId(acct.keyId)\n        sig.setSignature(hexBuffer(acct.signature))\n        tx.addEnvelopeSignatures(sig)\n      }\n    } catch (error) {\n      console.error(\"Trouble applying envelope signature\", {acct, ix})\n      throw error\n    }\n  }\n\n  const req = new SendTransactionRequest()\n  req.setTransaction(tx)\n\n  var t1 = Date.now()\n  const res = await unary(opts.node, AccessAPI.SendTransaction, req)\n  var t2 = Date.now()\n\n  let ret = response()\n  ret.tag = ix.tag\n  ret.transactionId = u8ToHex(res.getId_asU8())\n\n  if (typeof window !== \"undefined\") {\n    window.dispatchEvent(\n      new CustomEvent(\"FLOW::TX\", {\n        detail: {txId: ret.transactionId, delta: t2 - t1},\n      })\n    )\n  }\n\n  return ret\n}\n","import {AccessAPI, GetTransactionRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetTransaction(ix, opts = {}) {\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const req = new GetTransactionRequest()\n  req.setId(hexBuffer(ix.transaction.id))\n\n  const res = await unary(opts.node, AccessAPI.GetTransaction, req)\n\n  let ret = response()\n  ret.tag = ix.tag\n\n  const unwrapKey = key => ({\n    address: u8ToHex(key.getAddress_asU8()),\n    keyId: key.getKeyId(),\n    sequenceNumber: key.getSequenceNumber()\n  })\n\n  const unwrapSignature = sig => ({\n    address: u8ToHex(sig.getAddress_asU8()),\n    keyId: sig.getKeyId(),\n    signature: u8ToHex(sig.getSignature_asU8())\n  })\n\n  let transaction = res.getTransaction()\n  ret.transaction = {\n      script: Buffer.from(transaction.getScript_asU8()).toString(\"utf8\"),\n      args: (transaction.getArgumentsList()).map(arg => JSON.parse(Buffer.from(arg).toString(\"utf8\"))),\n      referenceBlockId: u8ToHex(transaction.getReferenceBlockId_asU8()),\n      gasLimit: transaction.getGasLimit(),\n      proposalKey: unwrapKey(transaction.getProposalKey()),\n      payer: u8ToHex(transaction.getPayer_asU8()),\n      authorizers: (transaction.getAuthorizersList()).map(u8ToHex),\n      payloadSignatures: (transaction.getPayloadSignaturesList()).map(unwrapSignature),\n      envelopeSignatures: (transaction.getEnvelopeSignaturesList()).map(unwrapSignature)\n  }\n\n  return ret\n}\n","import {ExecuteScriptAtLatestBlockRequest, ExecuteScriptAtBlockIDRequest, ExecuteScriptAtBlockHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst argumentBuffer = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nasync function sendExecuteScriptAtBlockIDRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new ExecuteScriptAtBlockIDRequest()\n\n  req.setBlockId(hexBuffer(ix.block.id))\n\n  const code = Buffer.from(ix.message.cadence, \"utf8\")\n  ix.message.arguments.forEach(arg => req.addArguments(argumentBuffer(ix.arguments[arg].asArgument)))\n  req.setScript(code)\n\n  const res = await unary(opts.node, AccessAPI.ExecuteScriptAtBlockID, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendExecuteScriptAtBlockHeightRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new ExecuteScriptAtBlockHeightRequest()\n\n  req.setBlockHeight(Number(ix.block.height))\n\n  const code = Buffer.from(ix.message.cadence, \"utf8\")\n  ix.message.arguments.forEach(arg => req.addArguments(argumentBuffer(ix.arguments[arg].asArgument)))\n  req.setScript(code)\n\n  const res = await unary(opts.node, AccessAPI.ExecuteScriptAtBlockHeight, req) \n  \n  return constructResponse(ix, res)\n}\n\nasync function sendExecuteScriptAtLatestBlockRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new ExecuteScriptAtLatestBlockRequest()\n  \n  const code = Buffer.from(ix.message.cadence, \"utf8\")\n  ix.message.arguments.forEach(arg => req.addArguments(argumentBuffer(ix.arguments[arg].asArgument)))\n  req.setScript(code)\n\n  const res = await unary(opts.node, AccessAPI.ExecuteScriptAtLatestBlock, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res)  {\n  let ret = response()\n  ret.tag = ix.tag\n  ret.encodedData = JSON.parse(Buffer.from(res.getValue_asU8()).toString(\"utf8\"))\n\n  return ret\n}\n\nexport async function sendExecuteScript(ix, opts = {}) {\n  ix = await ix\n\n  if (ix.block.id) {\n    return await sendExecuteScriptAtBlockIDRequest(ix, opts)\n  } else if (ix.block.height) {\n    return await sendExecuteScriptAtBlockHeightRequest(ix, opts)\n  } else {\n    return await sendExecuteScriptAtLatestBlockRequest(ix, opts)\n  }\n}\n","import {GetAccountAtLatestBlockRequest, GetAccountAtBlockHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {sansPrefix, withPrefix} from \"@onflow/util-address\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst paddedHexBuffer = (hex, pad) =>\n  Buffer.from(hex.padStart(pad * 2, 0), \"hex\")\n\nconst addressBuffer = addr => paddedHexBuffer(addr, 8)\n\nasync function sendGetAccountAtBlockHeightRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetAccountAtBlockHeightRequest()\n  req.setBlockHeight(Number(ix.block.height))\n  req.setAddress(addressBuffer(sansPrefix(ix.account.addr)))\n\n  const res = await unary(opts.node, AccessAPI.GetAccountAtBlockHeight, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetAccountAtLatestBlockRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetAccountAtLatestBlockRequest()\n  req.setAddress(addressBuffer(sansPrefix(ix.account.addr)))\n\n  const res = await unary(opts.node, AccessAPI.GetAccountAtLatestBlock, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res) {\n  let ret = response()\n  ret.tag = ix.tag\n\n  const account = res.getAccount()\n\n  let contractsMap;\n  const contracts = (contractsMap = account.getContractsMap()) ? contractsMap.getEntryList().reduce((acc, contract) => ({\n    ...acc,\n    [contract[0]]: Buffer.from(contract[1] || new UInt8Array()).toString(\"utf8\")\n  }), {}) : {}\n\n  ret.account = {\n    address: withPrefix(u8ToHex(account.getAddress_asU8())),\n    balance: account.getBalance(),\n    code: Buffer.from(account.getCode_asU8() || new UInt8Array()).toString(\"utf8\"),\n    contracts,\n    keys: account.getKeysList().map(publicKey => ({\n      index: publicKey.getIndex(),\n      publicKey: u8ToHex(publicKey.getPublicKey_asU8()),\n      signAlgo: publicKey.getSignAlgo(),\n      hashAlgo: publicKey.getHashAlgo(),\n      weight: publicKey.getWeight(),\n      sequenceNumber: publicKey.getSequenceNumber(),\n      revoked: publicKey.getRevoked(),\n    })),\n  }\n\n  return ret\n}\n\n\nexport async function sendGetAccount(ix, opts = {}) {\n  ix = await ix\n\n  if (ix.block.height !== null) {\n    return await sendGetAccountAtBlockHeightRequest(ix, opts)\n  } else {\n    return await sendGetAccountAtLatestBlockRequest(ix, opts)\n  }\n}\n","import {GetEventsForHeightRangeRequest, GetEventsForBlockIDsRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nasync function sendGetEventsForHeightRangeRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetEventsForHeightRangeRequest()\n  req.setType(ix.events.eventType)\n\n  req.setStartHeight(Number(ix.events.start))\n  req.setEndHeight(Number(ix.events.end))\n\n  const res = await unary(opts.node, AccessAPI.GetEventsForHeightRange, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetEventsForBlockIDsRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetEventsForBlockIDsRequest()\n  req.setType(ix.events.eventType)\n\n  ix.events.blockIds.forEach(id =>\n    req.addBlockIds(hexBuffer(id))\n  )\n\n  const res = await unary(opts.node, AccessAPI.GetEventsForBlockIDs, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res) {\n  let ret = response()\n  ret.tag = ix.tag\n\n  const results = res.getResultsList()\n  ret.events = results.reduce((blocks, result) => {\n    const blockId = u8ToHex(result.getBlockId_asU8())\n    const blockHeight = result.getBlockHeight()\n    const blockTimestamp = result.getBlockTimestamp().toDate().toISOString()\n    const events = result.getEventsList()\n    events.forEach(event => {\n      blocks.push({\n        blockId,\n        blockHeight,\n        blockTimestamp,\n        type: event.getType(),\n        transactionId: u8ToHex(event.getTransactionId_asU8()),\n        transactionIndex: event.getTransactionIndex(),\n        eventIndex: event.getEventIndex(),\n        payload: JSON.parse(Buffer.from(event.getPayload_asU8()).toString(\"utf8\")),\n      })\n    })\n    return blocks\n  }, [])\n\n  return ret\n}\n\nexport async function sendGetEvents(ix, opts = {}) {  \n  ix = await ix\n\n  const interactionContainsBlockHeightRange = ix.events.start !== null \n  const interactionContainsBlockIDsList = Array.isArray(ix.events.blockIds) && ix.events.blockIds.length > 0\n \n  invariant(\n    interactionContainsBlockHeightRange || interactionContainsBlockIDsList,\n    \"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified.\"\n  )\n  \n  if (interactionContainsBlockHeightRange) {\n    return await sendGetEventsForHeightRangeRequest(ix, opts)\n  } else {\n    return await sendGetEventsForBlockIDsRequest(ix, opts)\n  }\n}\n","import {GetBlockByIDRequest, GetBlockByHeightRequest, GetLatestBlockRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nasync function sendGetBlockByIDRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetBlockByIDRequest()\n  req.setId(hexBuffer(ix.block.id))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockByID, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetBlockByHeightRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetBlockByHeightRequest()\n  req.setHeight(Number(ix.block.height))\n    \n  const res = await unary(opts.node, AccessAPI.GetBlockByHeight, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetBlockRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetLatestBlockRequest()\n\n  if (ix.block?.isSealed) {\n    req.setIsSealed(ix.block.isSealed)\n  }\n\n  const res = await unary(opts.node, AccessAPI.GetLatestBlock, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res) {\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = (block.getSignaturesList()).map(u8ToHex)\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp().toDate().toISOString(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: (collectionGuarantee.getSignaturesList()).map(u8ToHex),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: (blockSeal.getExecutionReceiptSignaturesList()).map(u8ToHex),\n      resultApprovalSignatures: (blockSeal.getResultApprovalSignaturesList()).map(u8ToHex),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n\nexport async function sendGetBlock(ix, opts = {}) {\n  ix = await ix\n\n  const interactionHasBlockID = ix.block.id !== null\n  const interactionHasBlockHeight = ix.block.height !== null\n\n  if (interactionHasBlockID) {\n    return await sendGetBlockByIDRequest(ix, opts)\n  } else if (interactionHasBlockHeight) {\n    return await sendGetBlockByHeightRequest(ix, opts)\n  } else {\n    return await sendGetBlockRequest(ix, opts)\n  }\n}\n","import {GetLatestBlockHeaderRequest, GetBlockHeaderByIDRequest, GetBlockHeaderByHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nasync function sendGetBlockHeaderByIDRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetBlockHeaderByIDRequest()\n  req.setId(hexBuffer(ix.block.id))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockHeaderByID, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetBlockHeaderByHeightRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetBlockHeaderByHeightRequest()\n  req.setHeight(Number(ix.block.height))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockHeaderByHeight, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetLatestBlockHeaderRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetLatestBlockHeaderRequest()\n\n  if (ix.block?.isSealed) {\n    req.setIsSealed(ix.block.isSealed)\n  }\n\n  const res = await unary(opts.node, AccessAPI.GetLatestBlockHeader, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res) {\n  const blockHeader = res.getBlock()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.blockHeader = {\n    id: u8ToHex(blockHeader.getId_asU8()),\n    parentId: u8ToHex(blockHeader.getParentId_asU8()),\n    height: blockHeader.getHeight(),\n    timestamp: blockHeader.getTimestamp().toDate().toISOString(),\n  }\n\n  return ret\n}\n\nexport async function sendGetBlockHeader(ix, opts = {}) {\n  ix = await ix\n\n  const interactionHasBlockID = ix.block.id !== null\n  const interactionHasBlockHeight = ix.block.height !== null\n\n  if (interactionHasBlockID) {\n    return await sendGetBlockHeaderByIDRequest(ix, opts)\n  } else if (interactionHasBlockHeight) {\n    return await sendGetBlockHeaderByHeightRequest(ix, opts)\n  } else {\n    return await sendGetLatestBlockHeaderRequest(ix, opts)\n  }\n}\n","import {GetLatestBlockRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\n\nconst latestBlockDeprecationNotice = () => {\n  console.error(\n    `\n          %c@onflow/send Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the interaction object is deprecated and will no longer be recognized in future releases of @onflow/send.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/send/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        `\n      .replace(/\\n\\s+/g, \"\\n\")\n      .trim(),\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nexport async function sendGetLatestBlock(ix, opts = {}) {\n  ix = await ix\n\n  const req = new GetLatestBlockRequest()\n\n  if (ix.latestBlock && ix.latestBlock.isSealed) {\n    req.setIsSealed(ix.latestBlock.isSealed)\n    latestBlockDeprecationNotice()\n  }\n\n  if (ix.block && ix.block.isSealed) {\n    req.setIsSealed(ix.block.isSealed)\n  }\n\n  const res = await unary(opts.node, AccessAPI.GetLatestBlock, req)\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {GetBlockByIDRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetBlockById(ix, opts = {}) {\n  ix = await ix\n\n  const req = new GetBlockByIDRequest()\n  req.setId(hexBuffer(ix.block.id))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockByID, req)\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {GetBlockByHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\n\nexport async function sendGetBlockByHeight(ix, opts = {}) {\n  ix = await ix\n\n  const req = new GetBlockByHeightRequest()\n  req.setHeight(Number(ix.block.height))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockByHeight, req)\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {GetCollectionByIDRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetCollection(ix, opts = {}) {\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const req = new GetCollectionByIDRequest()\n  req.setId(hexBuffer(ix.collection.id))\n\n  const res = await unary(opts.node, AccessAPI.GetCollectionByID, req)\n\n  const collection = res.getCollection()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.collection = {\n    id: u8ToHex(collection.getId_asU8()),\n    transactionIds: (collection.getTransactionIdsList()).map(u8ToHex)\n  }\n\n  return ret\n}\n","import {\n  isTransaction,\n  isGetTransaction,\n  isGetTransactionStatus,\n  isScript,\n  isGetAccount,\n  isGetEvents,\n  isGetBlock,\n  isGetBlockHeader,\n  isGetLatestBlock,\n  isGetBlockById,\n  isGetBlockByHeight,\n  isPing,\n  isGetCollection,\n} from \"../interaction/interaction.js\"\nimport {sendTransaction} from \"./send-transaction.js\"\nimport {sendGetTransactionStatus} from \"./send-get-transaction-status.js\"\nimport {sendGetTransaction} from \"./send-get-transaction.js\"\nimport {sendExecuteScript} from \"./send-execute-script.js\"\nimport {sendGetAccount} from \"./send-get-account.js\"\nimport {sendGetEvents} from \"./send-get-events.js\"\nimport {sendGetBlock} from \"./send-get-block.js\"\nimport {sendGetBlockHeader} from \"./send-get-block-header.js\"\nimport {sendGetLatestBlock} from \"./send-get-latest-block.js\"\nimport {sendGetBlockById} from \"./send-get-block-by-id.js\"\nimport {sendGetBlockByHeight} from \"./send-get-block-by-height.js\"\nimport {sendGetCollection} from \"./send-get-collection.js\"\nimport {sendPing} from \"./send-ping.js\"\nimport {config} from \"../config\"\n\nexport const send = async (ix, opts = {}) => {\n  opts.node = opts.node || (await config().get(\"accessNode.api\"))\n  ix = await ix\n\n  // prettier-ignore\n  switch (true) {\n    case isTransaction(ix):\n      return opts.sendTransaction ? opts.sendTransaction(ix, opts) : sendTransaction(ix, opts)\n    case isGetTransactionStatus(ix):\n      return opts.sendGetTransactionStatus ? opts.sendGetTransactionStatus(ix, opts) : sendGetTransactionStatus(ix, opts)\n    case isGetTransaction(ix):\n      return opts.sendGetTransaction ? opts.sendGetTransaction(ix, opts) : sendGetTransaction(ix, opts)\n    case isScript(ix):\n      return opts.sendExecuteScript ? opts.sendExecuteScript(ix, opts) : sendExecuteScript(ix, opts)\n    case isGetAccount(ix):\n      return opts.sendGetAccount ? opts.sendGetAccount(ix, opts) : sendGetAccount(ix, opts)\n    case isGetEvents(ix):\n      return opts.sendGetEvents ? opts.sendGetEvents(ix, opts) : sendGetEvents(ix, opts)\n    case isGetLatestBlock(ix):\n      return opts.sendGetLatestBlock ? opts.sendGetLatestBlock(ix, opts) : sendGetLatestBlock(ix,  opts)\n    case isGetBlock(ix):\n      return opts.sendGetBlock ? opts.sendGetBlock(ix, opts) : sendGetBlock(ix, opts)\n    case isGetBlockHeader(ix):\n      return opts.sendGetBlockHeader ? opts.sendGetBlockHeader(ix, opts) : sendGetBlockHeader(ix, opts)\n    case isGetBlockById(ix):\n      return opts.sendGetBlockById ? opts.sendGetBlockById(ix, opts) : sendGetBlockById(ix, opts)\n    case isGetBlockByHeight(ix):\n      return opts.sendGetBlockByHeight ? opts.sendGetBlockByHeight(ix, opts) : sendGetBlockByHeight(ix, opts)\n    case isGetCollection(ix):\n      return opts.sendGetCollection ? opts.sendGetCollection(ix, opts) : sendGetCollection(ix, opts)\n    case isPing(ix):\n      return opts.sendPing ? opts.sendPing(ix, opts) : sendPing(ix, opts)\n    default:\n      return ix\n  }\n}\n","import {AccessAPI, GetTransactionRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetTransactionStatus(ix, opts = {}) {\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const req = new GetTransactionRequest()\n  req.setId(hexBuffer(ix.transaction.id))\n\n  const res = await unary(opts.node, AccessAPI.GetTransactionResult, req)\n\n  let events = res.getEventsList()\n\n  let ret = response()\n  ret.tag = ix.tag\n  ret.transactionStatus = {\n    status: res.getStatus(),\n    statusCode: res.getStatusCode(),\n    errorMessage: res.getErrorMessage(),\n    events: events.map(event => ({\n      type: event.getType(),\n      transactionId: u8ToHex(event.getTransactionId_asU8()),\n      transactionIndex: event.getTransactionIndex(),\n      eventIndex: event.getEventIndex(),\n      payload: JSON.parse(Buffer.from(event.getPayload_asU8()).toString(\"utf8\")),\n    })),\n  }\n\n  return ret\n}\n","import {AccessAPI, PingRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nexport async function sendPing(ix, opts = {}) {\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const req = new PingRequest()\n\n  const res = await unary(opts.node, AccessAPI.Ping, req)\n\n  let ret = response()\n  ret.tag = ix.tag\n\n  return ret\n}\n","import {pipe, Ok, makeGetBlock} from \"../interaction/interaction.js\"\n\nexport function getBlock(isSealed = null) {\n  return pipe([\n    makeGetBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeGetAccount, Ok} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\nexport function getAccount(addr) {\n  return pipe([\n    makeGetAccount,\n    ix => {\n      ix.account.addr = sansPrefix(addr)\n      return Ok(ix)\n    }\n  ])\n}\n","const latestBlockDeprecationNotice = () => {\n  console.error(\n    `\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        `\n      .replace(/\\n\\s+/g, \"\\n\")\n      .trim(),\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst decodeNumber = async (num, _, stack) => {\n  try {\n    return Number(num)\n  } catch (e) {\n    throw new Error(`Decode Number Error : ${stack.join(\".\")}`)\n  }\n}\n\nconst decodeImplicit = async (i) => i\n\nconst decodeVoid = async () => null\n\nconst decodeType = async (type) => {\n  return type.staticType\n}\n\nconst decodePath = async (path) => {\n  return {\n    domain: path.domain,\n    identifier: path.identifier\n  }\n}\n\nconst decodeCapability = async (cap) => {\n  return {\n    path: cap.path,\n    address: cap.address,\n    borrowType: cap.borrowType\n  }\n}\n\nconst decodeOptional = async (optional, decoders, stack) =>\n  optional ? await recurseDecode(optional, decoders, stack) : null\n\nconst decodeReference = async (v) => ({address: v.address, type: v.type})\n\nconst decodeArray = async (array, decoders, stack) =>\n  await Promise.all(\n    array.map(\n      (v) =>\n        new Promise(async (res) =>\n          res(await recurseDecode(v, decoders, [...stack, v.type]))\n        )\n    )\n  )\n\nconst decodeDictionary = async (dictionary, decoders, stack) =>\n  await dictionary.reduce(async (acc, v) => {\n    acc = await acc\n    acc[\n      await recurseDecode(v.key, decoders, [...stack, v.key])\n    ] = await recurseDecode(v.value, decoders, [...stack, v.key])\n    return acc\n  }, Promise.resolve({}))\n\nconst decodeComposite = async (composite, decoders, stack) => {\n  const decoded = await composite.fields.reduce(async (acc, v) => {\n    acc = await acc\n    acc[v.name] = await recurseDecode(v.value, decoders, [...stack, v.name])\n    return acc\n  }, Promise.resolve({}))\n  const decoder = composite.id && decoderLookup(decoders, composite.id)\n  return decoder ? await decoder(decoded) : decoded\n}\n\nconst defaultDecoders = {\n  UInt: decodeNumber,\n  Int: decodeNumber,\n  UInt8: decodeNumber,\n  Int8: decodeNumber,\n  UInt16: decodeNumber,\n  Int16: decodeNumber,\n  UInt32: decodeNumber,\n  Int32: decodeNumber,\n  UInt64: decodeNumber,\n  Int64: decodeNumber,\n  UInt128: decodeNumber,\n  Int128: decodeNumber,\n  UInt256: decodeNumber,\n  Int256: decodeNumber,\n  Word8: decodeNumber,\n  Word16: decodeNumber,\n  Word32: decodeNumber,\n  Word64: decodeNumber,\n  UFix64: decodeImplicit,\n  Fix64: decodeImplicit,\n  String: decodeImplicit,\n  Character: decodeImplicit,\n  Bool: decodeImplicit,\n  Address: decodeImplicit,\n  Void: decodeVoid,\n  Optional: decodeOptional,\n  Reference: decodeReference,\n  Array: decodeArray,\n  Dictionary: decodeDictionary,\n  Event: decodeComposite,\n  Resource: decodeComposite,\n  Struct: decodeComposite,\n  Enum: decodeComposite,\n  Type: decodeType,\n  Path: decodePath,\n  Capability: decodeCapability,\n}\n\nconst decoderLookup = (decoders, lookup) => {\n  const found = Object.keys(decoders).find((decoder) => {\n    if (/^\\/.*\\/$/.test(decoder)) {\n      const reg = new RegExp(decoder.substring(1, decoder.length - 1))\n      return reg.test(lookup)\n    }\n    return decoder === lookup\n  })\n  return lookup && found && decoders[found]\n}\n\nconst recurseDecode = async (decodeInstructions, decoders, stack) => {\n  let decoder = decoderLookup(decoders, decodeInstructions.type)\n  if (!decoder)\n    throw new Error(\n      `Undefined Decoder Error: ${decodeInstructions.type}@${stack.join(\".\")}`\n    )\n  return await decoder(decodeInstructions.value, decoders, stack)\n}\n\nexport const decode = async (\n  decodeInstructions,\n  customDecoders = {},\n  stack = []\n) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n  return await recurseDecode(decodeInstructions, decoders, stack)\n}\n\nexport const decodeResponse = async (response, customDecoders = {}) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n\n  if (response.encodedData) {\n    return await decode(response.encodedData, decoders)\n  } else if (response.transactionStatus) {\n    return {\n      ...response.transactionStatus,\n      events: await Promise.all(\n        response.transactionStatus.events.map(async function decodeEvents(e) {\n          return {\n            type: e.type,\n            transactionId: e.transactionId,\n            transactionIndex: e.transactionIndex,\n            eventIndex: e.eventIndex,\n            data: await decode(e.payload, decoders),\n          }\n        })\n      ),\n    }\n  } else if (response.transaction) {\n    return response.transaction\n  } else if (response.events) {\n    return await Promise.all(\n      response.events.map(async function decodeEvents(e) {\n        return {\n          blockId: e.blockId,\n          blockHeight: e.blockHeight,\n          blockTimestamp: e.blockTimestamp,\n          type: e.type,\n          transactionId: e.transactionId,\n          transactionIndex: e.transactionIndex,\n          eventIndex: e.eventIndex,\n          data: await decode(e.payload, decoders),\n        }\n      })\n    )\n  } else if (response.account) {\n    return response.account\n  } else if (response.block) {\n    return response.block\n  } else if (response.blockHeader) {\n    return response.blockHeader\n  } else if (response.latestBlock) {\n    latestBlockDeprecationNotice()\n    return response.latestBlock\n  } else if (response.transactionId) {\n    return response.transactionId\n  } else if (response.collection) {\n    return response.collection\n  }\n\n  return null\n}\n","import { encode } from '@onflow/rlp';\n\nexport const encodeTransactionPayload = tx => prependTransactionDomainTag(rlpEncode(preparePayload(tx)))\nexport const encodeTransactionEnvelope = tx => prependTransactionDomainTag(rlpEncode(prepareEnvelope(tx)))\n\nconst rightPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padEnd(pad * 2, 0), \"hex\")\n\nconst leftPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padStart(pad * 2, 0), \"hex\")\n\nconst TRANSACTION_DOMAIN_TAG = rightPaddedHexBuffer(Buffer.from(\"FLOW-V0.0-transaction\").toString(\"hex\"), 32).toString(\"hex\")\nconst prependTransactionDomainTag = tx => TRANSACTION_DOMAIN_TAG + tx\n\nconst addressBuffer = addr => leftPaddedHexBuffer(addr, 8)\n\nconst blockBuffer = block => leftPaddedHexBuffer(block, 32)\n\nconst argumentToString = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\n\nconst scriptBuffer = script => Buffer.from(script, \"utf8\")\nconst signatureBuffer = signature => Buffer.from(signature, \"hex\")\n\nconst rlpEncode = v => {\n  return encode(v).toString(\"hex\")\n}\n\nconst preparePayload = tx => {\n  validatePayload(tx)\n\n  return [\n    scriptBuffer(tx.cadence),\n    tx.arguments.map(argumentToString),\n    blockBuffer(tx.refBlock),\n    tx.computeLimit,\n    addressBuffer(tx.proposalKey.address),\n    tx.proposalKey.keyId,\n    tx.proposalKey.sequenceNum,\n    addressBuffer(tx.payer),\n    tx.authorizers.map(addressBuffer),\n  ]\n}\n\nconst prepareEnvelope = tx => {\n  validateEnvelope(tx)\n\n  return [preparePayload(tx), preparePayloadSignatures(tx)]\n}\n\nconst preparePayloadSignatures = tx => {\n  const signers = collectSigners(tx)\n\n  return tx.payloadSigs\n    .map(sig => {\n      return {\n        signerIndex: signers.get(sig.address),\n        keyId: sig.keyId,\n        sig: sig.sig,\n      }\n    })\n    .sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n    })\n    .map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n    })\n}\n\nconst collectSigners = tx => {\n  const signers = new Map()\n  let i = 0\n\n  const addSigner = addr => {\n    if (!signers.has(addr)) {\n      signers.set(addr, i)\n      i++\n    }\n  }\n\n  addSigner(tx.proposalKey.address)\n  addSigner(tx.payer)\n  tx.authorizers.forEach(addSigner)\n\n  return signers\n}\n\nconst validatePayload = tx => {\n  payloadFields.forEach(field => checkField(tx, field))\n  proposalKeyFields.forEach(field =>\n    checkField(tx.proposalKey, field, \"proposalKey\")\n  )\n}\n\nconst validateEnvelope = tx => {\n  envelopeFields.forEach(field => checkField(tx, field))\n  tx.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n}\n\nconst isNumber = v => typeof v === \"number\"\nconst isString = v => typeof v === \"string\"\nconst isObject = v => v !== null && typeof v === \"object\"\nconst isArray = v => isObject(v) && v instanceof Array\n\nconst payloadFields = [\n  {name: \"cadence\", check: isString},\n  {name: \"arguments\", check: isArray},\n  {name: \"refBlock\", check: isString, defaultVal: \"0\"},\n  {name: \"computeLimit\", check: isNumber},\n  {name: \"proposalKey\", check: isObject},\n  {name: \"payer\", check: isString},\n  {name: \"authorizers\", check: isArray},\n]\n\nconst proposalKeyFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sequenceNum\", check: isNumber},\n]\n\nconst envelopeFields = [{name: \"payloadSigs\", check: isArray}]\n\nconst payloadSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst checkField = (obj, field, base, index) => {\n  const {name, check, defaultVal} = field\n  if (obj[name] == null && defaultVal != null) obj[name] = defaultVal\n  if (obj[name] == null) throw missingFieldError(name, base, index)\n  if (!check(obj[name])) throw invalidFieldError(name, base, index)\n}\n\nconst printFieldName = (field, base, index) => {\n  if (!!base)\n    return index == null ? `${base}.${field}` : `${base}.${index}.${field}`\n  return field\n}\n\nconst missingFieldError = (field, base, index) =>\n  new Error(`Missing field ${printFieldName(field, base, index)}`)\nconst invalidFieldError = (field, base, index) =>\n  new Error(`Invalid field ${printFieldName(field, base, index)}`)\n","import {isTransaction, isScript, get} from \"../interaction/interaction.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {config} from \"../config\"\n\nconst isFn = v => typeof v === \"function\"\nconst isString = v => typeof v === \"string\"\n\nexport async function resolveCadence(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    var cadence = get(ix, \"ix.cadence\")\n    invariant(\n      isFn(cadence) || isString(cadence),\n      \"Cadence needs to be a function or a string.\"\n    )\n    if (isFn(cadence)) cadence = await cadence({})\n    invariant(isString(cadence), \"Cadence needs to be a string at this point.\")\n    ix.message.cadence = await config()\n      .where(/^0x/)\n      .then(d =>\n        Object.entries(d).reduce(\n          (cadence, [key, value]) => cadence.replace(key, value),\n          cadence\n        )\n      )\n  }\n\n  return ix\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction, isScript} from \"../interaction/interaction.js\"\n\nconst isFn = v => typeof v === \"function\"\n\nfunction cast(arg) {\n  // prettier-ignore\n  invariant(typeof arg.xform != null, `No type specified for argument: ${arg.value}`)\n\n  if (isFn(arg.xform)) return arg.xform(arg.value)\n  if (isFn(arg.xform.asArgument)) return arg.xform.asArgument(arg.value)\n\n  // prettier-ignore\n  invariant(false, `Invalid Argument`, arg)\n}\n\nexport async function resolveArguments(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    for (let [id, arg] of Object.entries(ix.arguments)) {\n      ix.arguments[id].asArgument = cast(arg)\n    }\n  }\n\n  return ix\n}\n","import {isTransaction} from \"../interaction/interaction.js\"\nimport {sansPrefix, withPrefix} from \"@onflow/util-address\"\nimport {\n  encodeTransactionPayload as encodeInsideMessage,\n  encodeTransactionEnvelope as encodeOutsideMessage,\n} from \"../encode/encode.js\"\n\nexport async function resolveSignatures(ix) {\n  if (isTransaction(ix)) {\n    try {\n      let insideSigners = findInsideSigners(ix)\n      const insidePayload = encodeInsideMessage(prepForEncoding(ix))\n      await Promise.all(insideSigners.map(fetchSignature(ix, insidePayload)))\n\n      let outsideSigners = findOutsideSigners(ix)\n      const outsidePayload = encodeOutsideMessage({\n        ...prepForEncoding(ix),\n        payloadSigs: insideSigners.map(id => ({\n          address: ix.accounts[id].addr,\n          keyId: ix.accounts[id].keyId,\n          sig: ix.accounts[id].signature,\n        })),\n      })\n      await Promise.all(outsideSigners.map(fetchSignature(ix, outsidePayload)))\n    } catch (error) {\n      console.error(\"Signatures\", error, {ix})\n      throw error\n    }\n  }\n  return ix\n}\n\nexport function findInsideSigners(ix) {\n  // Inside Signers Are: (authorizers + proposer) - payer\n  let inside = new Set(ix.authorizations)\n  inside.add(ix.proposer)\n  inside.delete(ix.payer)\n  return Array.from(inside)\n}\n\nfunction findOutsideSigners(ix) {\n  // Outside Signers Are: (payer)\n  let outside = new Set([ix.payer])\n  return Array.from(outside)\n}\n\nfunction fetchSignature(ix, payload) {\n  return async function innerFetchSignature(id) {\n    const acct = ix.accounts[id]\n    if (acct.signature != null) return\n    const {signature} = await acct.signingFunction(\n      buildSignable(acct, payload, ix)\n    )\n    // if (!acct.role.proposer) {\n    //   ix.accounts[id].keyId = keyId\n    // }\n    ix.accounts[id].signature = signature\n  }\n}\n\nexport const createSignableVoucher = ix => {\n  const buildInsideSigners = () =>\n    findInsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n  const buildOutsideSigners = () =>\n    findOutsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: withPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: withPrefix(ix.accounts[ix.payer].addr),\n    authorizers: ix.authorizations\n      .map(cid => withPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, []),\n    payloadSigs: buildInsideSigners(),\n    envelopeSigs: buildOutsideSigners(),\n  }\n}\n\nexport function buildSignable(acct, message, ix) {\n  try {\n    return {\n      f_type: \"Signable\",\n      f_vsn: \"1.0.1\",\n      message,\n      addr: sansPrefix(acct.addr),\n      keyId: acct.keyId,\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildSignable\", error)\n    throw error\n  }\n}\n\nfunction prepForEncoding(ix) {\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: sansPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: sansPrefix(ix.accounts[ix.payer].addr),\n    authorizers: ix.authorizations\n      .map(cid => sansPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, []),\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction} from \"../interaction/interaction.js\"\nimport {createSignableVoucher} from \"./resolve-signatures\"\n\nconst isFn = v => typeof v === \"function\"\nexport function buildPreSignable(acct, ix) {\n  try {\n    return {\n      f_type: \"PreSignable\",\n      f_vsn: \"1.0.1\",\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildPreSignable\", error)\n    throw error\n  }\n}\n\nasync function collectAccounts(ix, accounts, last, depth = 3) {\n  invariant(depth, \"Account Resolve Recursion Limit Exceeded\", {ix, accounts})\n\n  let authorizations = []\n  for (let ax of accounts) {\n    var old = last || ax\n    if (isFn(ax.resolve)) ax = await ax.resolve(ax, buildPreSignable(ax, ix))\n\n    if (Array.isArray(ax)) {\n      await collectAccounts(ix, ax, old, depth - 1)\n    } else {\n      if (ax.addr != null && ax.keyId != null) {\n        ax.tempId = `${ax.addr}-${ax.keyId}`\n      }\n      ix.accounts[ax.tempId] = ix.accounts[ax.tempId] || ax\n      ix.accounts[ax.tempId].role.proposer =\n        ix.accounts[ax.tempId].role.proposer || ax.role.proposer\n      ix.accounts[ax.tempId].role.payer =\n        ix.accounts[ax.tempId].role.payer || ax.role.payer\n      ix.accounts[ax.tempId].role.authorizer =\n        ix.accounts[ax.tempId].role.authorizer || ax.role.authorizer\n\n      if (ix.accounts[ax.tempId].role.proposer && ix.proposer === old.tempId) {\n        ix.proposer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.payer && ix.payer === old.tempId) {\n        ix.payer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.authorizer) {\n        if (last) {\n          // do group replacement\n          authorizations = Array.from(new Set([...authorizations, ax.tempId]))\n        } else {\n          // do 1-1 replacement\n          ix.authorizations = ix.authorizations.map(d =>\n            d === old.tempId ? ax.tempId : d\n          )\n          // if (!new Set(ix.authorizations).has(ax.tempId)) {\n          //   ix.authorizations = Array.from(\n          //     new Set([...ix.authorizations, ax.tempId])\n          //   )\n          // }\n        }\n      }\n    }\n    if (old.tempId != ax.tempId) delete ix.accounts[old.tempId]\n  }\n\n  if (last) {\n    // complete (flatmap) group replacement\n    ix.authorizations = ix.authorizations\n      .map(d => (d === last.tempId ? authorizations : d))\n      .reduce(\n        (prev, curr) =>\n          Array.isArray(curr) ? [...prev, ...curr] : [...prev, curr],\n        []\n      )\n  }\n}\n\nexport async function resolveAccounts(ix) {\n  if (isTransaction(ix)) {\n    try {\n      await collectAccounts(ix, Object.values(ix.accounts))\n      await collectAccounts(ix, Object.values(ix.accounts))\n    } catch (error) {\n      console.error(\"=== SAD PANDA ===\\n\\n\", error, \"\\n\\n=== SAD PANDA ===\")\n      throw error\n    }\n  }\n  return ix\n}\n","import { get, pipe, Ok, Bad } from \"../interaction/interaction.js\"\n\nexport async function resolveValidators(ix) {\n  const validators = get(ix, 'ix.validators', [])\n  return pipe(ix, validators.map(cb => ix => cb(ix, { Ok, Bad })))\n}   \n","import {sansPrefix} from \"@onflow/util-address\"\n\nexport async function resolveFinalNormalization(ix) {\n  for (let key of Object.keys(ix.accounts)) {\n    ix.accounts[key].addr = sansPrefix(ix.accounts[key].addr)\n  }\n  return ix\n}\n","import {pipe, isTransaction} from \"../interaction/interaction.js\"\nimport {config} from \"../config\"\nimport {invariant} from \"@onflow/util-invariant\"\n\nimport {send} from \"../send/sdk-send.js\"\nimport {build} from \"../build/build.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nimport {resolveRefBlockId} from \"./resolve-ref-block-id.js\"\nimport {resolveCadence} from \"./resolve-cadence.js\"\nimport {resolveArguments} from \"./resolve-arguments.js\"\nimport {resolveAccounts} from \"./resolve-accounts.js\"\nimport {resolveSignatures} from \"./resolve-signatures.js\"\nimport {resolveValidators} from \"./resolve-validators.js\"\nimport {resolveFinalNormalization} from \"./resolve-final-normalization.js\"\n\nconst noop = v => v\nconst debug = (key, fn = noop) => async ix => {\n  const take = (obj, keys = []) => {\n    if (typeof keys === \"string\") keys = keys.split(\" \")\n    keys.reduce((acc, key) => ({...acc, [key]: obj[key]}), {})\n  }\n\n  const accts = ix =>\n    [\n      \"\\nAccounts:\",\n      {\n        proposer: ix.proposer,\n        authorizations: ix.authorizations,\n        payer: ix.payer,\n      },\n      \"\\n\\nDetails:\",\n      ix.accounts,\n    ].filter(Boolean)\n\n  const log = (...msg) => {\n    console.log(`debug[${key}] ---\\n`, ...msg, \"\\n\\n\\n---\")\n  }\n\n  if (await config.get(`debug.${key}`)) await fn(ix, log, accts)\n  return ix\n}\n\nexport const resolve = pipe([\n  resolveCadence,\n  debug(\"cadence\", (ix, log) => log(ix.message.cadence)),\n  resolveArguments,\n  debug(\"arguments\", (ix, log) => log(ix.message.arguments, ix.message)),\n  resolveAccounts,\n  debug(\"accounts\", (ix, log, accts) => log(...accts(ix))),\n  /* special */ execFetchRef,\n  /* special */ execFetchSequenceNumber,\n  resolveSignatures,\n  debug(\"signatures\", (ix, log, accts) => log(...accts(ix))),\n  resolveFinalNormalization,\n  resolveValidators,\n  debug(\"resolved\", (ix, log) => log(ix)),\n])\n\nasync function execFetchRef(ix) {\n  if (isTransaction(ix) && ix.message.refBlock == null) {\n    const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], send)\n    ix.message.refBlock = (await sendFn(build([getBlock()])).then(decode)).id\n  }\n  return ix\n}\n\nasync function execFetchSequenceNumber(ix) {\n  if (isTransaction(ix)) {\n    const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], send)\n    var acct = Object.values(ix.accounts).find(a => a.role.proposer)\n    invariant(acct, `Transactions require a proposer`)\n    if (acct.sequenceNum == null) {\n      ix.accounts[acct.tempId].sequenceNum = await sendFn(\n        await build([getAccount(acct.addr)])\n      )\n        .then(decode)\n        .then(acct => acct.keys)\n        .then(keys => keys.find(key => key.index === acct.keyId))\n        .then(key => key.sequenceNumber)\n    }\n  }\n  return ix\n}\n","import {interaction, pipe} from \"../interaction/interaction.js\"\nimport {config} from \"../config\"\nimport {resolve as defaultResolve} from \"../resolve/resolve.js\"\nimport {send as defaultSend} from \"./sdk-send.js\"\n\nexport const send = async (args = [], opts = {}) => {\n  const sendFn = await config.first(\n    [\"sdk.transport\", \"sdk.send\"],\n    opts.send || defaultSend\n  )\n\n  const resolveFn = await config.first(\n    [\"sdk.resolve\"],\n    opts.resolve || defaultResolve\n  )\n\n  if (Array.isArray(args)) args = pipe(interaction(), args)\n  return sendFn(await resolveFn(args), opts)\n}\n","import {withPrefix, sansPrefix} from \"@onflow/util-address\"\nimport {\n    encodeTransactionPayload,\n    encodeTransactionEnvelope,\n} from \"../encode/encode.js\"\n\nconst findPayloadSigners = (voucher) => {\n    // Payload Signers Are: (authorizers + proposer) - payer\n    let payload = new Set(voucher.authorizers)\n    payload.add(voucher.proposalKey.address)\n    payload.delete(voucher.payer)\n    return Array.from(payload).map(withPrefix)\n}\n\nconst findEnvelopeSigners = (voucher) => {\n    // Envelope Signers Are: (payer)\n    let envelope = new Set([voucher.payer])\n    return Array.from(envelope).map(withPrefix)\n}\n\nexport class UnableToDetermineMessageEncodingTypeForSignerAddress extends Error {\n    constructor(signerAddress) {\n      const msg = `\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${signerAddress}. \n        Please ensure the address: ${signerAddress} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim()\n      super(msg)\n      this.name = \"Unable To Determine Message Encoding For Signer Addresss\"\n    }\n}\n\nexport const encodeMessageFromSignable = (signable, signerAddress) => {\n    let payloadSigners = findPayloadSigners(signable.voucher)\n    let envelopeSigners = findEnvelopeSigners(signable.voucher)\n\n    const isPayloadSigner = payloadSigners.includes(withPrefix(signerAddress))\n    const isEnvelopeSigner = envelopeSigners.includes(withPrefix(signerAddress))\n\n    if (!isPayloadSigner && !isEnvelopeSigner) {\n        throw new UnableToDetermineMessageEncodingTypeForSignerAddress(signerAddress)\n    }\n\n    const message = {\n        cadence: signable.voucher.cadence,\n        refBlock: signable.voucher.refBlock,\n        computeLimit: signable.voucher.computeLimit,\n        arguments: signable.voucher.arguments,\n        proposalKey: {\n            ...signable.voucher.proposalKey,\n            address: sansPrefix(signable.voucher.proposalKey.address)\n        },\n        payer: sansPrefix(signable.voucher.payer),\n        authorizers: signable.voucher.authorizers.map(sansPrefix),\n        payloadSigs: signable.voucher.payloadSigs.map(ps => ({\n            ...ps,\n            address: sansPrefix(ps.address)\n        }))\n    }\n\n    return isPayloadSigner ? encodeTransactionPayload(message) : encodeTransactionEnvelope(message)\n}\n\n","import {update} from \"../interaction/interaction.js\"\n\nexport function validator(cb) {\n    return update('ix.validators', validators => \n        Array.isArray(validators) ? validators.push(cb) : [cb]\n    )\n}\n","import {pipe, Ok} from \"../interaction/interaction.js\"\n\nexport function ref(refBlock) {\n  return pipe([\n    ix => {\n      ix.message.refBlock = refBlock\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, put, Ok, makeTransaction} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nconst DEFAULT_COMPUTE_LIMIT = 10\nconst DEFAULT_SCRIPT_ACCOUNTS = []\nconst DEFUALT_REF = null\n\nexport function transaction(...args) {\n  return pipe([\n    makeTransaction,\n    put(\"ix.cadence\", template(...args)),\n    ix => {\n      ix.message.computeLimit = ix.message.computeLimit || DEFAULT_COMPUTE_LIMIT\n      ix.message.refBlock = ix.message.refBlock || DEFUALT_REF\n      ix.authorizations = ix.authorizations || DEFAULT_SCRIPT_ACCOUNTS\n      return Ok(ix)\n    },\n  ])\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isGetAccount, isGetBlock} from \"../interaction/interaction\"\n\nexport function mockAccountResponse(ix, numberOfKeys = 5) {\n  // prettier-ignore\n  invariant(ix.account, \"mockAccountResponse(ix) -- ix.account is missing\", ix)\n  // prettier-ignore\n  invariant( ix.account.addr, \"mockAccountResponse(ix) -- ix.account.addr is missing\", ix)\n\n  const address = ix.account.addr\n\n  return {\n    account: {\n      addr: address,\n      keys: Array.from({length: numberOfKeys}, (_, i) => ({\n        index: i,\n        sequenceNumber: 42,\n      })),\n    },\n  }\n}\n\nexport function mockGetBlockResponse(ix) {\n  return {\n    tag: \"GET_BLOCK\",\n    block: {\n      id: \"32\",\n    },\n  }\n}\n\nconst identity = v => v\n\nexport function mockSend(fallback = identity) {\n  return async function execSend(ix) {\n    ix = await ix\n    switch (true) {\n      case isGetAccount(ix):\n        return mockAccountResponse(ix)\n\n      case isGetBlock(ix):\n        return mockGetBlockResponse(ix)\n\n      default:\n        return fallback(ix)\n    }\n  }\n}\n","export const idof = acct => `${acct.addr}-${acct.keyId}`\n\nexport function sig(opts) {\n  return [\"SIGNATURE\", opts.addr, opts.keyId].join(\".\")\n}\n\nexport function authzFn(opts = {}) {\n  return function (account) {\n    const acct = {\n      ...account,\n      ...opts,\n      signingFunction:\n        opts.signingFunction ||\n        account.signingFunction ||\n        fallbackSigningFunction,\n    }\n\n    return acct\n\n    function fallbackSigningFunction(signable) {\n      return {\n        addr: acct.addr,\n        keyId: acct.keyId,\n        signature: sig(acct),\n      }\n    }\n  }\n}\n\nexport function authzResolve(opts = {}) {\n  return function (account) {\n    const {tempId, ...rest} = opts\n    return {\n      ...account,\n      tempId: tempId || \"WITH_RESOLVE\",\n      resolve: authzFn(rest),\n    }\n  }\n}\n\nconst ROLE = {proposer: false, authorizer: false, payer: false}\nconst noop = () => {}\n\nexport function authzResolveMany(opts = {}) {\n  return function (account) {\n    const tempId = opts.tempId || \"AUTHZ_RESOLVE_MANY\"\n    return {\n      ...account,\n      tempId,\n      resolve: () =>\n        [\n          opts.proposer &&\n            authzFn(opts.proposer)({role: {...ROLE, proposer: true}}),\n          ...opts.authorizations\n            .map(authzFn)\n            .map(d => d({role: {...ROLE, authorizer: true}})),\n          opts.payer && authzFn(opts.payer)({role: {...ROLE, payer: true}}),\n        ].filter(Boolean),\n    }\n  }\n}\n","import {build} from \"../build/build\"\nimport {resolve} from \"../resolve/resolve\"\nimport {ref} from \"../build/build-ref\"\n\nexport const run = (fns = []) => build([ref(\"123\"), ...fns]).then(resolve)\n","export const VERSION = \"0.0.54\"\n","import {getAccount} from \"../build/build-get-account.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {send} from \"../send/send.js\"\n\nexport function account(address, opts) {\n  return send([getAccount(address)], opts).then(decode)\n}\n","import {pipe, makeArgument} from \"../interaction/interaction.js\"\n\nexport function args(ax = []) {\n  return pipe(ax.map(makeArgument))\n}\n\nexport function arg(value, xform) {\n  return {value, xform}\n}\n","import {pipe} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockHeight(height) {\n  return pipe([\n    ix => {\n      ix.block.height = height\n      return ix\n    },\n    validator(ix => {\n      if (typeof ix.block.isSealed === \"boolean\")\n        throw new Error(\"Unable to specify both block height and isSealed.\")\n      if (ix.block.id)\n        throw new Error(\"Unable to specify both block height and block id.\")\n      return ix\n    }),\n  ])\n}\n","import {isGetAccount, pipe, Ok} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockId(id) {\n  return pipe([\n    ix => {\n      ix.block.id = id\n      return Ok(ix)\n    },\n    validator((ix, {Ok, Bad}) => {\n      if (isGetAccount(ix)) return Bad(ix, \"Unable to specify a block id with a Get Account interaction.\")\n      if (typeof ix.block.isSealed === \"boolean\") return Bad(ix, \"Unable to specify both block id and isSealed.\")\n      if (ix.block.height) return Bad(ix, \"Unable to specify both block id and block height.\")\n      return Ok(ix)\n    }),\n  ])\n}\n","import {pipe, prepAccount, AUTHORIZER} from \"../interaction/interaction.js\"\n\nexport function authorizations(ax = []) {\n  return pipe(\n    ax.map(authz => {\n      return prepAccount(authz, {role: AUTHORIZER})\n    })\n  )\n}\n\nexport function authorization(addr, signingFunction, keyId, sequenceNum) {\n  return {addr, signingFunction, keyId, sequenceNum}\n}\n","import {decodeResponse} from \"./decode.js\"\nimport {config} from \"../config\"\n\nexport async function decode(response) {\n  const decodersFromConfig = await config().where(/^decoder\\./)\n  const decoders = Object.entries(decodersFromConfig).map(\n    ([pattern, xform]) => {\n      pattern = `/${pattern.replace(/^decoder\\./, \"\")}$/`\n      return [pattern, xform]\n    }\n  )\n\n  return decodeResponse(response, Object.fromEntries(decoders))\n}\n","import {pipe, Ok, makeGetBlockByHeight} from \"../interaction/interaction.js\"\n\nexport function getBlockByHeight(height) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockByHeight builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0003-deprecate-get-block-by-height-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetBlockByHeight,\n    ix => {\n      ix.block.height = height\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetBlockById} from \"../interaction/interaction.js\"\n\nexport function getBlockById(id) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockById builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0004-deprecate-get-block-by-id-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetBlockById,\n    ix => {\n      ix.block.ids = [id]\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetBlockHeader} from \"../interaction/interaction.js\"\n\nexport function getBlockHeader(isSealed = null) {\n  return pipe([\n    makeGetBlockHeader,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeGetCollection} from \"../interaction/interaction.js\"\n\nexport function getCollection(id = null) {\n  return pipe([\n    makeGetCollection,\n    ix => {\n      ix.collection.id = id\n      return ix\n    }\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEvents(eventType, start, end) {\n\n  if (typeof start !== \"undefined\" || typeof end !== \"undefined\") {\n    console.warn(\n      `\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n    )  \n  }\n\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockHeightRange(eventType, start, end) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockIds(eventType, blockIds = []) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.blockIds = blockIds\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetLatestBlock} from \"../interaction/interaction.js\"\n\nexport function getLatestBlock(isSealed = false) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getLatestBlock builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0006-deprecate-get-latest-block-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetLatestBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransaction} from \"../interaction/interaction.js\"\n\nexport function getTransaction(transactionId) {\n  return pipe([\n    makeGetTransaction,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransactionStatus} from \"../interaction/interaction.js\"\n\nexport function getTransactionStatus(transactionId) {\n  return pipe([\n    makeGetTransactionStatus,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","import { Ok, Bad } from \"../interaction/interaction.js\"\n\nexport function invariant(...args) {\n  if (args.length > 1) {\n    const [predicate, message] = args\n    return invariant((ix, { Ok, Bad }) => {\n      return predicate ? Ok(ix) : Bad(ix, message)\n    })\n  }\n  const [fn] = args\n  return ix => fn(ix, {Ok, Bad})\n}\n","import {send} from \"../send/send.js\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nexport function latestBlock(...args) {\n  let opts = args[1] || (typeof args[0] === \"object\" ? args[0] : undefined)\n  let isSealed = typeof args[0] === \"boolean\" ? args[0] : undefined\n\n  if (typeof args[0] === \"object\") {\n    console.warn(\n      `\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing options as the first arguement to the latestBlock function has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0007-deprecate-opts-first-arg-latest-block\n  \n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n    )\n  }\n\n  return send([getBlock(isSealed)], opts).then(decode)\n}\n","export function limit(computeLimit) {\n  return ix => {\n    ix.message.computeLimit = computeLimit\n    return ix\n  }\n}\n","import {deprecate} from \"./utils\"\n// Base\nexport {build} from \"./build/build.js\"\nexport {resolve} from \"./resolve/resolve.js\"\nexport {send} from \"./send/send.js\"\nexport {decode} from \"./decode/sdk-decode.js\"\n\n// Utils\nexport {\n  interaction,\n  isOk,\n  isBad,\n  why,\n  pipe,\n  get,\n  put,\n  update,\n  destroy,\n  isUnknown,\n  isScript,\n  isTransaction,\n  isGetTransaction,\n  isGetTransactionStatus,\n  isGetAccount,\n  isGetEvents,\n  isGetLatestBlock,\n  isGetBlockById,\n  isGetBlockByHeight,\n  isPing,\n  isGetBlock,\n  isGetBlockHeader,\n  isGetCollection,\n} from \"./interaction/interaction.js\"\nexport {createSignableVoucher} from \"./resolve/resolve-signatures\"\nexport {encodeMessageFromSignable} from \"./wallet-utils/encode-signable.js\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\n\n// Helpers\nexport {latestBlock} from \"./latest-block/latest-block.js\"\nexport {account} from \"./account/account.js\"\n\n// Builders\nexport {authorizations, authorization} from \"./build/build-authorizations.js\"\nexport {atBlockHeight} from \"./build/build-at-block-height.js\"\nexport {atBlockId} from \"./build/build-at-block-id.js\"\nexport {getAccount} from \"./build/build-get-account.js\"\nexport {getEvents} from \"./build/build-get-events.js\"\nexport {getEventsAtBlockHeightRange} from \"./build/build-get-events-at-block-height-range.js\"\nexport {getEventsAtBlockIds} from \"./build/build-get-events-at-block-ids\"\nexport {getBlock} from \"./build/build-get-block.js\"\nexport {getBlockHeader} from \"./build/build-get-block-header.js\"\nexport {getLatestBlock} from \"./build/build-get-latest-block.js\"\nexport {getBlockById} from \"./build/build-get-block-by-id.js\"\nexport {getBlockByHeight} from \"./build/build-get-block-by-height\"\nexport {getCollection} from \"./build/build-get-collection\"\nexport {getTransactionStatus} from \"./build/build-get-transaction-status.js\"\nexport {getTransaction} from \"./build/build-get-transaction.js\"\nexport {limit} from \"./build/build-limit.js\"\nexport {args, arg} from \"./build/build-arguments.js\"\nexport {proposer} from \"./build/build-proposer.js\"\nexport {payer} from \"./build/build-payer.js\"\nexport {ping} from \"./build/build-ping.js\"\nexport {ref} from \"./build/build-ref.js\"\nexport {script} from \"./build/build-script.js\"\nexport {transaction} from \"./build/build-transaction.js\"\nexport {validator} from \"./build/build-validator.js\"\nexport {invariant} from \"./build/build-invariant.js\"\n\n// Resolvers\nexport {resolveCadence} from \"./resolve/resolve-cadence.js\"\nexport {resolveFinalNormalization} from \"./resolve/resolve-final-normalization\"\nexport {resolveProposerSequenceNumber} from \"./resolve/resolve-proposer-sequence-number\"\nexport {resolveArguments} from \"./resolve/resolve-arguments.js\"\nexport {resolveAccounts} from \"./resolve/resolve-accounts.js\"\nexport {resolveSignatures} from \"./resolve/resolve-signatures.js\"\nexport {resolveValidators} from \"./resolve/resolve-validators.js\"\nexport {resolveRefBlockId} from \"./resolve/resolve-ref-block-id.js\"\n\n// Config\nexport {config} from \"./config\"\n\n// Deprecated\nexport const params = params =>\n  deprecate.error({\n    name: \"params\",\n    transitionsPath:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  })\nexport const param = params =>\n  deprecate.warn({\n    name: \"param\",\n    transitionsPath:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  })\n\nimport * as TestUtils from \"./test-utils\"\nexport {TestUtils}\n\nexport {VERSION} from \"./VERSION\"\n","const buildWarningMessage = ({name, transitionsPath}) => {\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${name} builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${transitionsPath}\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst buildErrorMessage = ({name, transitionsPath}) => {\n  console.error(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${name} builder has been removed from the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${transitionsPath}\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst warn = deprecated => buildWarningMessage(deprecated)\n\nconst error = deprecated => {\n  buildErrorMessage(deprecated)\n}\n\nexport const deprecate = {\n  warn,\n  error,\n}\n","import {prepAccount, PAYER} from \"../interaction/interaction.js\"\n\nexport async function payer(authz) {\n  return prepAccount(authz, {role: PAYER})\n}\n","import {makePing} from \"../interaction/interaction.js\"\n\nexport function ping() {\n  return makePing\n}\n","import {prepAccount, PROPOSER} from \"../interaction/interaction.js\"\n\nexport async function proposer(authz) {\n  return prepAccount(authz, {role: PROPOSER})\n}\n","import {isTransaction, Ok} from \"../interaction/interaction.js\"\nimport {send} from \"../send/sdk-send.js\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {build} from \"../build/build.js\"\n\nexport const resolveProposerSequenceNumber = ({ node }) => async (ix) => {\n  if (!(isTransaction(ix))) return Ok(ix)\n  if (ix.accounts[ix.proposer].sequenceNum) return Ok(ix)\n\n  const response = await send(await build([\n    getAccount(ix.accounts[ix.proposer].addr)\n  ]), { node })\n  const decoded = await decodeResponse(response)\n\n  ix.accounts[ix.proposer].sequenceNum = decoded.keys[ix.accounts[ix.proposer].keyId].sequenceNumber\n\n  return Ok(ix)\n}\n","import {isTransaction, Ok, interaction, pipe} from \"../interaction/interaction.js\"\nimport {send} from \"../send/sdk-send.js\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\n\nasync function getRefId (opts) {\n  var ix\n  ix = await pipe(interaction(), [getBlock()])\n  ix = await send(ix, opts)\n  ix = await decodeResponse(ix)\n  return ix.id\n}\n\nexport function resolveRefBlockId(opts) {\n  return async ix => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.message.refBlock) return Ok(ix)\n\n    ix.message.refBlock = await getRefId(opts)\n\n    return Ok(ix)\n  }\n}\n","import {pipe, Ok, put, makeScript} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nexport function script(...args) {\n  return pipe([\n    makeScript,\n    put(\"ix.cadence\", template(...args))\n  ])\n}\n"],"names":["SCRIPT","TRANSACTION","GET_TRANSACTION_STATUS","GET_ACCOUNT","GET_EVENTS","GET_LATEST_BLOCK","PING","GET_TRANSACTION","GET_BLOCK_BY_ID","GET_BLOCK_BY_HEIGHT","GET_BLOCK","GET_BLOCK_HEADER","GET_COLLECTION","AUTHORIZER","IX","KEYS","Set","Object","keys","JSON","parse","interaction","CHARS","split","randChar","Math","random","length","uuid","Array","from","join","isArray","d","isNull","Ok","ix","status","Bad","reason","makeIx","wat","tag","prepAccount","acct","opts","invariant","role","ACCOUNT","tempId","accounts","resolve","authorizations","push","makeArgument","arg","message","arguments","value","asArgument","xform","makeScript","makeTransaction","makeGetTransactionStatus","makeGetTransaction","makeGetAccount","makeGetEvents","makeGetLatestBlock","makeGetBlockById","makeGetBlockByHeight","makePing","makeGetBlock","makeGetBlockHeader","makeGetCollection","is","isUnknown","isScript","isTransaction","isGetTransactionStatus","isGetTransaction","isGetAccount","isGetEvents","isGetLatestBlock","isGetBlockById","isGetBlockByHeight","isPing","isGetBlock","isGetBlockHeader","isGetCollection","isBad","recPipe","fns","body","recover","result","key","has","Error","hardMode","hd","rest","cur","isNumber","hasOwnProperty","isInteraction","e","then","pipe","arg1","arg2","identity","v","get","fallback","assigns","put","update","fn","build","first","wants","head","ret","NAME","PUT","GET","GET_ALL","UPDATE","DELETE","CLEAR","WHERE","UPDATED","HANDLERS","ctx","_letter","broadcast","all","letter","reply","pattern","where","SUBSCRIBE","subscribe","send","UNSUBSCRIBE","unsubscribe","config","expectReply","timeout","_delete","callback","subscriber","spawn","clearConfig","values","map","delete","overload","noop","Promise","reject","oldConfig","_callback","error","response","unary","host","method","request","metadataFromConfig","grpc","metadata","Metadata","onEnd","statusMessage","Code","OK","setDefaultTransport","NodeHttpTransport","hexBuffer","hex","Buffer","addressBuffer","addr","padStart","pad","u8ToHex","u8","toString","argumentBuffer","stringify","constructResponse","res","encodedData","getValue_asU8","contractsMap","account","getAccount","contracts","getContractsMap","getEntryList","reduce","acc","contract","UInt8Array","address","withPrefix","getAddress_asU8","balance","getBalance","code","getCode_asU8","getKeysList","publicKey","index","getIndex","getPublicKey_asU8","signAlgo","getSignAlgo","hashAlgo","getHashAlgo","weight","getWeight","sequenceNumber","getSequenceNumber","revoked","getRevoked","results","getResultsList","events","blocks","blockId","getBlockId_asU8","blockHeight","getBlockHeight","blockTimestamp","getBlockTimestamp","toDate","toISOString","getEventsList","forEach","event","type","getType","transactionId","getTransactionId_asU8","transactionIndex","getTransactionIndex","eventIndex","getEventIndex","payload","getPayload_asU8","block","getBlock","collectionGuarantees","getCollectionGuaranteesList","blockSeals","getBlockSealsList","signatures","getSignaturesList","id","getId_asU8","parentId","getParentId_asU8","height","getHeight","timestamp","getTimestamp","collectionGuarantee","collectionId","getCollectionId_asU8","blockSeal","executionReceiptId","getExecutionReceiptId_asU8","executionReceiptSignatures","getExecutionReceiptSignaturesList","resultApprovalSignatures","getResultApprovalSignaturesList","blockHeader","node","sendTransaction","defaultUnary","tx","Transaction","setScript","cadence","setGasLimit","computeLimit","setReferenceBlockId","refBlock","setPayer","sansPrefix","payer","addArguments","prev","current","find","item","addAuthorizers","proposalKey","ProposalKey","setAddress","proposer","setKeyId","keyId","setSequenceNumber","sequenceNum","setProposalKey","signature","sig","Signature","setSignature","addPayloadSignatures","console","addEnvelopeSignatures","req","SendTransactionRequest","setTransaction","t1","Date","now","AccessAPI","SendTransaction","t2","window","dispatchEvent","CustomEvent","detail","txId","delta","sendGetTransactionStatus","GetTransactionRequest","setId","transaction","GetTransactionResult","transactionStatus","getStatus","statusCode","getStatusCode","errorMessage","getErrorMessage","sendGetTransaction","GetTransaction","unwrapSignature","getKeyId","getSignature_asU8","getTransaction","script","getScript_asU8","args","getArgumentsList","referenceBlockId","getReferenceBlockId_asU8","gasLimit","getGasLimit","getProposalKey","getPayer_asU8","authorizers","getAuthorizersList","payloadSignatures","getPayloadSignaturesList","envelopeSignatures","getEnvelopeSignaturesList","sendExecuteScript","ExecuteScriptAtBlockIDRequest","setBlockId","ExecuteScriptAtBlockID","sendExecuteScriptAtBlockIDRequest","ExecuteScriptAtBlockHeightRequest","setBlockHeight","Number","ExecuteScriptAtBlockHeight","sendExecuteScriptAtBlockHeightRequest","ExecuteScriptAtLatestBlockRequest","ExecuteScriptAtLatestBlock","sendExecuteScriptAtLatestBlockRequest","sendGetAccount","GetAccountAtBlockHeightRequest","GetAccountAtBlockHeight","sendGetAccountAtBlockHeightRequest","GetAccountAtLatestBlockRequest","GetAccountAtLatestBlock","sendGetAccountAtLatestBlockRequest","sendGetEvents","interactionContainsBlockHeightRange","start","interactionContainsBlockIDsList","blockIds","GetEventsForHeightRangeRequest","setType","eventType","setStartHeight","setEndHeight","end","GetEventsForHeightRange","sendGetEventsForHeightRangeRequest","GetEventsForBlockIDsRequest","addBlockIds","GetEventsForBlockIDs","sendGetEventsForBlockIDsRequest","sendGetLatestBlock","GetLatestBlockRequest","latestBlock","isSealed","setIsSealed","replace","trim","GetLatestBlock","sendGetBlock","interactionHasBlockHeight","GetBlockByIDRequest","GetBlockByID","sendGetBlockByIDRequest","GetBlockByHeightRequest","setHeight","GetBlockByHeight","sendGetBlockByHeightRequest","_ix$block","sendGetBlockRequest","sendGetBlockHeader","GetBlockHeaderByIDRequest","GetBlockHeaderByID","sendGetBlockHeaderByIDRequest","GetBlockHeaderByHeightRequest","GetBlockHeaderByHeight","sendGetBlockHeaderByHeightRequest","GetLatestBlockHeaderRequest","GetLatestBlockHeader","sendGetLatestBlockHeaderRequest","sendGetBlockById","sendGetBlockByHeight","sendGetCollection","GetCollectionByIDRequest","collection","GetCollectionByID","getCollection","transactionIds","getTransactionIdsList","sendPing","PingRequest","Ping","decodeNumber","num","_","stack","decodeImplicit","i","decodeComposite","composite","decoders","fields","recurseDecode","name","decoded","decoder","decoderLookup","defaultDecoders","UInt","Int","UInt8","Int8","UInt16","Int16","UInt32","Int32","UInt64","Int64","UInt128","Int128","UInt256","Int256","Word8","Word16","Word32","Word64","UFix64","Fix64","String","Character","Bool","Address","Void","Optional","optional","Reference","array","Dictionary","dictionary","Event","Resource","Struct","Enum","Type","staticType","Path","path","domain","identifier","Capability","cap","borrowType","lookup","found","test","RegExp","substring","decodeInstructions","decode","customDecoders","decodeResponse","data","_exit2","resolveCadence","isString","entries","isFn","resolveArguments","encodeTransactionPayload","prependTransactionDomainTag","rlpEncode","preparePayload","encodeTransactionEnvelope","prepareEnvelope","leftPaddedHexBuffer","TRANSACTION_DOMAIN_TAG","padEnd","argumentToString","encode","validatePayload","validateEnvelope","preparePayloadSignatures","signers","collectSigners","payloadSigs","signerIndex","sort","a","b","Map","addSigner","set","payloadFields","field","checkField","proposalKeyFields","envelopeFields","payloadSigFields","isObject","check","defaultVal","obj","base","missingFieldError","invalidFieldError","printFieldName","resolveSignatures","insideSigners","findInsideSigners","insidePayload","encodeInsideMessage","prepForEncoding","fetchSignature","outsideSigners","findOutsideSigners","outsidePayload","encodeOutsideMessage","inside","add","outside","signingFunction","f_type","f_vsn","roles","voucher","createSignableVoucher","buildSignable","cid","envelopeSigs","Symbol","iterator","pact","state","s","o","_settle","bind","observer","_Pact","prototype","onFulfilled","onRejected","this","_this","thenable","resolveAccounts","collectAccounts","last","depth","curr","target","step","_cycle","next","done","_isSettledPact","_fixup","TypeError","ax","old","authorizer","buildPreSignable","resolveValidators","validators","cb","resolveFinalNormalization","debug","accts","filter","Boolean","log","sendFn","_sendFn$then","defaultSend","defaultResolve","resolveFn","UnableToDetermineMessageEncodingTypeForSignerAddress","signerAddress","msg","validator","ref","DEFAULT_SCRIPT_ACCOUNTS","authzFn","signable","ROLE","numberOfKeys","mockAccountResponse","authz","decodersFromConfig","fromEntries","payloadSigners","envelopeSigners","envelope","findEnvelopeSigners","isPayloadSigner","includes","isEnvelopeSigner","ps","warn","ids","predicate","undefined","params","transitionsPath","getRefId","template"],"mappings":"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"}